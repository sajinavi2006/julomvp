# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2019-03-27 10:45
from __future__ import unicode_literals

import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import juloserver.julo.models
from django.db import transaction


def migrate_data_from_faspay(apps, schema_editor):
    FasPayTransaction = apps.get_model("julo", "FasPayTransaction")
    PaybackTransaction = apps.get_model("julo", "PaybackTransaction")
    faspay_data = FasPayTransaction.objects.all()
    with transaction.atomic():
        for item in faspay_data:
            PaybackTransaction.objects.create(
                id = item.id,
                transaction_id = item.transaction_id,
                amount = item.amount,
                is_processed = item.is_processed,
                status_code = item.status_code,
                status_desc = item.status_desc,
                transaction_date = item.transaction_date)


class Migration(migrations.Migration):

    dependencies = [
        ('julo', '0471_alter_payment_method_table'),
    ]

    operations = [
        migrations.RunPython(migrate_data_from_faspay, migrations.RunPython.noop),
    ]
