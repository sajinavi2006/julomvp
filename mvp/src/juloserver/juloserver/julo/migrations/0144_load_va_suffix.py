# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2017-11-06 10:16
from __future__ import unicode_literals

from builtins import str
from builtins import range
import random

from django.db import migrations
from django.conf import settings


def load_dummy_virtual_account_suffix(apps, schema_editor):

    VirtualAccountSuffix = apps.get_model("julo", "VirtualAccountSuffix")

    if settings.ENVIRONMENT == 'prod':
        first = 1000000
        last = 1100000
    else:
        first = 1
        last = 100000

    suffixes = list(range(first, last))
    random.shuffle(suffixes)

    entries = []
    for i in suffixes:
        va_suffix = VirtualAccountSuffix(
            virtual_account_suffix=settings.FASPAY_CODE + str(i))
        entries.append(va_suffix)

    VirtualAccountSuffix.objects.bulk_create(entries)


class Migration(migrations.Migration):

    dependencies = [
        ('julo', '0144_auto_20171106_1122'),
    ]

    operations = [
        migrations.RunPython(load_dummy_virtual_account_suffix),
    ]
