# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2017-09-05 10:30
from __future__ import unicode_literals
from datetime import datetime

from django.db import migrations
from ..payment_methods import PaymentMethods


def load_payment_method(apps, schema_editor):
    payment_methods = PaymentMethods

    PaymentMethodLookup = apps.get_model("julo", "PaymentMethodLookup")

    for pm in payment_methods:
        kwargs = {
            'cdate': datetime.now(),
            'code': pm.code,
            'name': pm.name
        }

        payment_method = PaymentMethodLookup(**kwargs)
        payment_method.save()


class Migration(migrations.Migration):

    dependencies = [
        ('julo', '0106_auto_20170905_1729'),
    ]

    operations = [
        migrations.RunPython(load_payment_method),
    ]
