# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2018-02-02 08:47
from __future__ import unicode_literals

from builtins import range
import random
import string

from django.db import migrations


def create_ana_server_user_if_needed(apps, schema_editor):

    User = apps.get_model("auth", "User")
    username = 'ana_server'
    if not User.objects.filter(username=username).exists():
        user = User.objects.create(
            username=username, email="ana_server@example.com",
            first_name="Analytics", last_name="Server (API user)",
            password=''.join([random.choice(string.hexdigits) for _ in range(42)]))
        user.is_staff = True
        user.save()


class Migration(migrations.Migration):

    dependencies = [
        ('julo', '0184_auto_20180130_1400'),
    ]

    operations = [
        migrations.RunPython(create_ana_server_user_if_needed, migrations.RunPython.noop)
    ]
