from django.conf import settings
from django.core.management.base import BaseCommand
from django.db import transaction
from juloserver.cfs.models import CfsActionAssignment


UPDATE_BCA_MISSION_IDS = {
    362422, 372906, 360833, 361665, 363603, 361414, 364554, 367537, 367020, 363278, 364699, 364691,
    364675, 364672, 364671, 364706, 364665, 364662, 364650, 364644, 364640, 364635, 364622, 364615,
    364605, 364603, 364599, 364598, 364593, 364592, 364578, 364576, 364574, 364557, 364556, 364555,
    364553, 364552, 364551, 364550, 364549, 364548, 364547, 364546, 364545, 364544, 364543, 364542,
    364541, 364540, 364539, 364538, 364537, 364536, 364535, 364534, 364533, 364532, 364531, 364530,
    364529, 364528, 364527, 364526, 364525, 364524, 364522, 364521, 364520, 364519, 364518, 364517,
    364516, 364515, 364514, 364513, 364512, 364510, 364508, 364503, 364501, 364492, 364491, 364480,
    364469, 364466, 364460, 364454, 364452, 364436, 364428, 364424, 364413, 364814, 364404, 364395,
    364383, 364381, 364380, 364377, 364374, 364366, 364350, 364344, 364342, 364338, 364330, 364325,
    364322, 364313, 364306, 364303, 364296, 364292, 364286, 364283, 364279, 364269, 364265, 364260,
    364254, 364250, 364245, 364231, 364230, 364205, 364194, 364108, 364106, 364097, 364095, 364078,
    364072, 364135, 364141, 364051, 364044, 364192, 364024, 364018, 364016, 364011, 364009, 364005,
    363998, 363983, 364101, 363974, 363970, 363944, 363941, 363935, 363932, 363924, 363923, 363905,
    363890, 363885, 363879, 363878, 363876, 363843, 363826, 363822, 363818, 363813, 363790, 363788,
    363779, 363774, 363763, 363762, 363759, 363752, 363749, 363743, 363740, 363738, 363737, 363730,
    363727, 363718, 363703, 363699, 362789, 364822, 364805, 364803, 364786, 364774, 364773, 364767,
    364765, 364750, 364746, 364744, 364732, 363676, 363672, 363669, 363656, 363642, 363634, 363629,
    363624, 363617, 363605, 363600, 363585, 363569, 363567, 363566, 363547, 363534, 363532, 363528,
    363525, 363507, 363503, 363494, 363483, 363465, 363459, 363455, 363304, 363299, 363298, 363297,
    363296, 363295, 363294, 363293, 363292, 363291, 363290, 363289, 363287, 363286, 363285, 363284,
    363283, 363281, 363280, 363279, 363277, 363276, 363275, 363274, 363273, 363272, 363271, 363270,
    363269, 363268, 363267, 363266, 363265, 363264, 363263, 363262, 363261, 363260, 363259, 363258,
    363257, 363256, 363255, 363254, 363253, 363252, 363251, 363250, 363249, 363248, 363247, 363246,
    363245, 363244, 363243, 363242, 363241, 363240, 363239, 363238, 363237, 363236, 363234, 363233,
    363232, 363231, 363230, 363222, 363219, 363217, 363206, 363191, 363188, 363449, 363155, 363151,
    363149, 363141, 363138, 363136, 363132, 363129, 363115, 363100, 363096, 363082, 363059, 363039,
    363024, 363014, 363013, 363012, 363007, 363005, 362998, 362988, 362977, 362971, 362969, 362962,
    364168, 364165, 364158, 364155, 364151, 364146, 364133, 364123, 364111, 364103, 362956, 362951,
    362948, 362947, 362944, 362934, 362927, 362921, 362901, 362900, 362895, 362878, 362872, 362871,
    362862, 362860, 362823, 362818, 362807, 362802, 362794, 362788, 362772, 362770, 362604, 362605,
    362593, 362591, 362561, 362544, 362534, 362530, 362524, 362521, 362519, 362516, 362514, 362512,
    362504, 362479, 362455, 362453, 362434, 362424, 362415, 362404, 362402, 362398, 362389, 362387,
    362385, 362381, 362351, 362337, 362330, 362312, 362298, 362288, 362273, 362261, 362252, 362222,
    362221, 362216, 362195, 362194, 362193, 362192, 362191, 362190, 362189, 362188, 362187, 362186,
    362185, 362184, 362183, 362182, 362181, 362180, 362179, 362178, 362177, 362176, 362175, 362174,
    362173, 362172, 362171, 362170, 362169, 362168, 362167, 362166, 363442, 363438, 363434, 363430,
    363429, 363422, 363411, 363408, 363404, 363395, 363381, 363369, 363358, 363347, 363340, 363331,
    363317, 363312, 362164, 362163, 362162, 362161, 362160, 362159, 362158, 362157, 362156, 362155,
    362154, 362153, 362152, 362151, 362150, 362149, 362148, 362147, 362146, 362145, 362144, 362143,
    362138, 362136, 362124, 362120, 362107, 362104, 362096, 362089, 362088, 362086, 362082, 362069,
    362061, 362058, 362049, 362040, 362038, 362036, 362023, 362030, 362008, 361989, 361983, 361981,
    361977, 361971, 361967, 361963, 361959, 361947, 361943, 361929, 361928, 361923, 361888, 361884,
    361882, 361873, 361864, 361839, 361836, 361834, 361826, 361823, 361819, 361811, 361806, 361797,
    361789, 361785, 361783, 361778, 361773, 361770, 361768, 361766, 361764, 361732, 361728, 361724,
    361723, 361688, 361680, 361679, 361678, 361675, 361672, 361652, 361635, 361631, 361607, 362767,
    362749, 362740, 362736, 362734, 362730, 362715, 362712, 362686, 362659, 362655, 362637, 362624,
    362615, 362610, 361601, 361600, 361596, 362028, 361581, 361571, 361565, 361561, 361543, 361541,
    361530, 361524, 361523, 361518, 361494, 361491, 361479, 361463, 361439, 361438, 361431, 361421,
    361410, 360580, 360581, 360572, 360571, 360850, 360786, 360555, 360546, 360544, 360783, 360779,
    360534, 360529, 360527, 360518, 360780, 360509, 360772, 360506, 360505, 360771, 360765, 360502,
    360767, 360484, 360478, 360474, 360443, 360433, 360431, 360429, 360428, 360419, 360818, 360817,
    360816, 360400, 360398, 360813, 360394, 360810, 360389, 360373, 360371, 360370, 360350, 360338,
    360807, 360328, 360319, 360804, 360802, 360301, 360293, 360285, 360268, 360801, 360261, 360260,
    360798, 360231, 360790, 360794, 360792, 360791, 360784, 360197, 360788, 360179, 360176, 360169,
    360762, 360149, 360778, 360145, 360776, 360137, 360134, 360777, 360770, 360120, 360119, 360114,
    360113, 360640, 360107, 360775, 360105, 360764, 360653, 360096, 360822, 360068, 361402, 361401,
    361397, 361391, 361389, 361385, 361381, 361371, 361369, 361364, 361346, 361326, 361316, 361314,
    361311, 361301, 361285, 361054, 361053, 361036, 361033, 361014, 361087, 361145, 360981, 360969,
    360964, 360955, 360949, 360945, 360944, 360940, 360935, 360933, 360929, 360928, 360918, 360911,
    360910, 360909, 360899, 360896, 360871, 360863, 360856, 360799, 360797, 360796, 360795, 360793,
    360752, 361133, 360724, 360714, 360705, 360695, 360674, 360664, 360660, 360651, 360606, 360601,
    360593, 361271, 361251, 361250, 361245, 361238, 361235, 361224, 361216, 361200, 361199, 361197,
    361195, 361185, 361173, 361171, 361170, 361151, 361147, 361137, 361122, 361118, 361112, 361107,
    361095, 361093, 361078, 361076, 361066, 361063, 361060, 361058, 349114, 379875, 384152, 385738
}

DELETE_BCA_MISSION_IDS = {
    362409, 362408, 372905, 360746, 361656, 363601, 361411, 364179, 367536, 367019, 362764, 364695,
    364681, 364678, 364674, 364666, 364667, 364660, 364670, 364663, 364658, 364661, 364647, 364643,
    364638, 364634, 364620, 364613, 364604, 364585, 364596, 364595, 363815, 363806, 364462, 364419,
    364571, 364573, 364240, 364266, 364258, 364175, 364094, 364090, 364130, 364116, 364098, 364154,
    364091, 364139, 364068, 364059, 364045, 363920, 363995, 363907, 363902, 363888, 363886, 363868,
    363850, 363867, 363810, 363780, 363768, 363742, 363860, 363741, 363695, 363746, 363722, 363611,
    363574, 363651, 363583, 363557, 363473, 363426, 363425, 363522, 363451, 348217, 363403, 363396,
    363226, 363174, 364509, 364433, 364429, 364499, 364494, 364497, 364464, 364456, 364490, 364489,
    364479, 364467, 364453, 364455, 364301, 364281, 364280, 364449, 364435, 364427, 364376, 364410,
    364409, 363872, 364324, 364319, 364372, 364371, 364378, 364379, 364305, 364373, 364365, 364348,
    364343, 364339, 364334, 364328, 364321, 364318, 364320, 364309, 364221, 364295, 364288, 364290,
    364285, 364282, 364278, 364267, 364264, 364259, 364252, 364249, 364243, 364223, 364229, 364196,
    364185, 364100, 364099, 364096, 364092, 364089, 364015, 364069, 364070, 364066, 364040, 364041,
    364037, 364020, 364033, 364022, 364021, 363437, 364012, 364010, 364007, 363975, 363754, 363994,
    363980, 363978, 363977, 363981, 363887, 363965, 363650, 363940, 363927, 363913, 363922, 363911,
    363901, 363897, 363894, 363882, 363881, 363830, 363877, 363874, 363873, 363871, 363875, 363837,
    363784, 363825, 363821, 363817, 363811, 363781, 363787, 363777, 363775, 363772, 363765, 363764,
    363760, 363757, 363756, 363751, 363748, 363409, 363739, 363731, 363736, 363729, 363622, 363716,
    363288, 362887, 363282, 362819, 361159, 361156, 361153, 364817, 364804, 364801, 364800, 364798,
    364797, 364775, 364760, 364772, 364766, 364763, 364742, 364741, 364728, 364743, 364726, 363674,
    363663, 360814, 363670, 363666, 363655, 363641, 363632, 363627, 363625, 363623, 363616, 363592,
    363588, 363599, 363582, 363568, 363562, 363563, 363555, 363546, 363533, 363529, 363527, 363523,
    363133, 362894, 362888, 363502, 363493, 363482, 363464, 363457, 363454, 363303, 363131, 363121,
    363095, 363074, 363064, 363120, 363045, 363038, 363028, 363018, 362848, 362833, 362820, 362916,
    362859, 362855, 362858, 362804, 362753, 362781, 362719, 362710, 362709, 362682, 362676, 362681,
    362673, 362695, 362694, 362668, 362628, 362609, 362577, 362501, 362500, 362499, 362438, 362311,
    362350, 362335, 362295, 362259, 362217, 362218, 362227, 362320, 362313, 362316, 362241, 362135,
    362117, 362098, 362071, 362106, 362050, 361936, 362034, 362024, 362022, 360841, 360840, 361979,
    361957, 362043, 361945, 361995, 361976, 361924, 361926, 363221, 363220, 363218, 363216, 363184,
    363139, 362601, 362600, 363177, 363153, 363150, 363148, 363137, 363135, 363134, 363128, 363124,
    363114, 363098, 363090, 363081, 363058, 362851, 363020, 362290, 360402, 360401, 363011, 363010,
    362827, 363004, 363001, 363000, 362996, 362986, 362976, 362958, 362963, 362961, 362959, 364167,
    364163, 364162, 364156, 364153, 364137, 364107, 364104, 364144, 364132, 364120, 364109, 364102,
    362955, 362865, 362861, 362073, 361937, 362946, 362945, 362799, 362932, 362923, 362920, 362898,
    362897, 362889, 361966, 362868, 362870, 362759, 362595, 362857, 362822, 362244, 362806, 362801,
    362783, 362784, 362776, 362774, 362762, 362761, 362771, 362769, 362603, 362602, 362587, 362588,
    362559, 362554, 362540, 362532, 362529, 362522, 362520, 362510, 362518, 362515, 362513, 362506,
    362491, 362494, 362436, 362432, 362426, 362435, 362429, 362421, 362416, 362414, 362395, 362401,
    362397, 362284, 362386, 362366, 362363, 362348, 362336, 362329, 362310, 362297, 362287, 362272,
    362269, 362267, 362265, 362256, 362247, 362219, 362220, 362208, 362035, 361409, 361405, 361387,
    361205, 361365, 361305, 361161, 360957, 360956, 361480, 361598, 361597, 361554, 361324, 361168,
    361776, 361621, 361492, 361617, 361655, 361668, 361605, 361320, 361495, 361310, 361807, 361771,
    360922, 361725, 360845, 360859, 363441, 363439, 363433, 363424, 363432, 363427, 363428, 363421,
    363410, 363407, 349188, 363394, 363380, 363368, 363351, 361426, 361269, 363346, 363343, 363342,
    363339, 363324, 363319, 363306, 363309, 363307, 360847, 361441, 360839, 361435, 360723, 360749,
    360837, 361254, 361609, 361604, 361759, 360718, 360733, 361051, 360760, 361436, 361241, 361018,
    361016, 361920, 361918, 361225, 361912, 361895, 361867, 362134, 362133, 362132, 362131, 362122,
    362116, 362114, 362003, 361997, 362103, 362095, 362052, 362048, 362015, 362012, 362009, 362085,
    362078, 362077, 362081, 361915, 362068, 362044, 360990, 362039, 362032, 362033, 362010, 362021,
    362014, 362007, 361986, 361980, 361964, 361972, 361970, 361956, 361962, 361955, 361946, 361941,
    361919, 361911, 361914, 361909, 361913, 361886, 361869, 361881, 361868, 361859, 360346, 360339,
    361833, 361832, 361820, 361163, 361155, 361148, 361135, 361816, 361812, 361809, 361804, 361799,
    361795, 361788, 361784, 361757, 361772, 361769, 361580, 361556, 361551, 361015, 361747, 361754,
    361719, 361727, 361710, 361707, 361722, 361717, 361687, 361603, 361677, 361673, 361663, 361671,
    361645, 361628, 361616, 361627, 361602, 361579, 362763, 362760, 362731, 362739, 362735, 362732,
    362728, 362726, 362713, 362678, 362685, 362647, 362649, 362636, 362618, 362623, 362612, 362608,
    361599, 361588, 361585, 361595, 361593, 361591, 361574, 361568, 361549, 361557, 361534, 361540,
    361528, 361520, 361515, 360992, 361516, 361487, 361489, 361477, 361452, 348021, 361437, 361276,
    361430, 361416, 361407, 361406, 360579, 360578, 360575, 360577, 360568, 360567, 360570, 360787,
    360565, 360561, 360386, 360241, 360240, 360227, 360545, 360540, 360543, 360539, 360537, 360530,
    360528, 360524, 360516, 360514, 360508, 360507, 360269, 360501, 360504, 349304, 360503, 360500,
    360491, 360482, 360476, 360470, 360333, 360288, 360432, 360418, 360417, 360414, 360411, 360423,
    360425, 360416, 360408, 360406, 360403, 360399, 360397, 360395, 360393, 360390, 360387, 360372,
    360367, 360368, 360341, 360340, 360337, 360335, 360327, 360318, 360317, 360314, 360296, 360292,
    360283, 360282, 360267, 360262, 360259, 360246, 360254, 360244, 360167, 360225, 360223, 360220,
    360208, 360204, 360195, 360183, 360177, 360161, 360146, 360159, 360148, 360147, 360144, 360143,
    360138, 360136, 360116, 360108, 360101, 360131, 360123, 360121, 360128, 360124, 360112, 360118,
    360099, 360111, 360638, 360109, 360098, 360092, 360089, 360106, 360100, 360102, 348932, 360652,
    360097, 360075, 360095, 360091, 360067, 361400, 361394, 361396, 361395, 361392, 361355, 361390,
    361388, 361071, 361380, 361368, 361361, 361358, 361363, 361362, 361351, 361345, 361323, 361309,
    361292, 361287, 361280, 361307, 361298, 361262, 361218, 361215, 361049, 361047, 361037, 361023,
    361027, 361007, 361008, 361000, 360995, 360975, 360968, 360962, 360954, 360947, 360942, 360943,
    360936, 360934, 360932, 360926, 360924, 360707, 360706, 360913, 360907, 360900, 360906, 360890,
    360894, 360870, 360862, 360854, 360654, 360665, 360658, 360607, 360603, 360751, 360750, 360745,
    360721, 360712, 360681, 360694, 360668, 360663, 360659, 360650, 360605, 360600, 360598, 360592,
    360591, 360590, 361270, 361249, 361246, 361243, 361244, 361242, 361237, 361233, 361223, 361214,
    361194, 361198, 361196, 361187, 361184, 361172, 361167, 361169, 361150, 361144, 361136, 361110,
    361116, 361113, 361109, 361106, 361094, 361092, 361089, 361077, 361069, 361064, 361061, 361052,
    361057, 349113, 379874, 384151, 385737
}


class Command(BaseCommand):
    help = "cleanup bca mission data"

    def handle(self, *args, **options):
        setting_env = settings.ENVIRONMENT.upper()
        if setting_env != 'PROD':
            return

        with transaction.atomic():
            CfsActionAssignment.objects.filter(id__in=DELETE_BCA_MISSION_IDS).delete()
            CfsActionAssignment.objects.filter(id__in=UPDATE_BCA_MISSION_IDS).update(
                repeat_action_no=1
            )
