{% extends "common/theme1/layout_theme1.html" %}

{% load checkusergroup from common %}
{% load static from staticfiles %}

{% block meta %}
    <!-- <meta http-equiv="refresh" content="120"> -->
{% endblock %}

{% block custom_css %}
  <!-- morris CSS -->
  <!-- <link href="{% static 'theme/plugins/bower_components/morrisjs/morris.css' %}" rel="stylesheet"> -->
  <!-- toast -->
  <link href="{% static 'theme/plugins/bower_components/toast-master/css/jquery.toast.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
{% endblock %}

{% block css_inside %}
  .status_font {
    font-size: 24px;
  }
  .analytics-info {
    border: solid 1px;
    border-radius: 3px;
  }
  .panel{
    border: solid 1px;
    border-radius: 3px;
  }
  .container-fluid {
    background-color: white;
  }
  hr{
    margin-top: 0px !important;
    margin-bottom: 10px !important;
  }
   .clearFix
   {
       clear:both;
   }
   .panel.panel-chat
   {
       position: fixed;
       bottom:0;
       right:10px;
       max-width: 800px;
       box-shadow: none;
       -webkit-box-shadow: none;
   }
   .panel.panel-chat.panel-chat-extend
   {
       position: fixed;
       bottom:0;
       right:60em;
       max-width: 800px;
       height:50em;
       box-shadow: none;
       -webkit-box-shadow: none;
   }
   .panel.panel-chat .panel-heading
   {
       background: #4b67a8;
       border: 1px solid #2e4588;
       color:#FFF;
   }
   .panel.panel-chat .panel-heading a:nth-of-type(1)
   {
       text-decoration: none;
       width: 800px;
       color:#FFF;
       font-weight: bold;
       float:left;
   }
   .panel.panel-chat .panel-heading a:nth-of-type(2)
   {
       text-decoration: none;
       max-width: 11px;
       width: 11px;
       color:#FFF;
       float:right;
   }
   .panel.panel-chat .panel-body
   {
       display: block;
       padding: 10px;
       margin: 0;
       max-height: 350px;
       height: 350px;
       border-left: 1px solid #b2b2b2;
       border-right: 1px solid #b2b2b2;
       background: white;
       overflow: auto;
   }
   .panel.panel-chat .panel-body::-webkit-scrollbar {
        display: none;
    }
    .panel.panel-chat .panel-body-extend
    {
        display: block;
        padding: 10px;
        margin: 0;
        max-height: 40em;
        height: 40em;
        border-left: 1px solid #b2b2b2;
        border-right: 1px solid #b2b2b2;
        background: white;
        overflow: auto;
    }
    .panel.panel-chat .panel-body-extend::-webkit-scrollbar {
         display: none;
     }
    .unselectable {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .custom-button{
      border: 2px solid #4CAF50;
      background-color: white;
      color: green;
      padding: 5px 28px;
      font-size: 16px;
      cursor: pointer;
    }
    .custom-button:hover {
      background-color: #4CAF50;
      color: white;
    }
    .status-box {
      background: #ffffff;
      margin-bottom: 15px;
    }
    .status-box-title {
      padding: 20px 25px;
      text-align: center;
      border-bottom: 1px solid #eee;
    }
    .status-box-footer {
      padding: 25px;
      text-align: center;
    }
    .status-box-title-text{
      font-weight: 600;
      color: #2B2B2B
    }
    .fs-24{
      font-size: 24px
    }
    .load-card-title{
      padding: 25px 25px 0px 25px;
      border-bottom: 1px solid #eee;
    }
    .load-card-body{
      padding: 10px 25px 25px;
    }
    .p-0{
      padding: 0px;
    }
    .card-tag{
      position: absolute;
      top: 5px;
      right: 12px;
      text-transform: uppercase;
      background-color: white;
      padding: 0px 5px;
      border-radius: 10%;
      color: #2B2B2B;
      font-size: 12px;
      font-weight: 500;
    }
    .dark-color{
      color: "#2B2B2B"
    }
    .light-color{
      color: "#fff"
    }

    .modal-confirm {
      color: #000;
      width: 525px
    }
    .modal-confirm .modal-content {
      padding: 20px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
    }
    .modal-confirm .modal-header {
      background: #fff;
      border-bottom: none;
          position: relative;
      text-align: center;
      margin: -20px -20px 0;
      border-radius: 5px 5px 0 0;
      padding: 35px;
      padding-bottom: 10px;
    }
    .modal-confirm h4 {
      text-align: center;
      font-size: 36px;
      margin: 10px 0;
    }
    .modal-confirm .form-control, .modal-confirm .btn {
      min-height: 40px;
      border-radius: 3px;
    }
    .modal-confirm .close {
      position: absolute;
      top: 15px;
      right: 15px;
      color: #fff;
      text-shadow: none;
      opacity: 0.5;
    }
    .modal-confirm .close:hover {
      opacity: 0.8;
    }
    .modal-confirm .icon-box {
      color: #a7db89;
      width: 95px;
      height: 95px;
      display: inline-block;
      border-radius: 50%;
      z-index: 9;
      border: 5px solid #edf8e7;
      padding: 15px;
      text-align: center;
    }
    .modal-confirm .icon-box i {
      font-size: 64px;
      margin: -4px 0 0 -4px;
    }
    .modal-confirm.modal-dialog {
      margin-top: 80px;
    }
    .modal-confirm .btn {
      background-color: #03a9f3;
      border-color: #03a9f3;
      width: 92px;
      height: 48px;
      border-radius: 5px;;
    }
    .modal-confirm .btn.warn{
      background-color: #fff;
      border-color: #000;
      color: #000;
    }
    .modal-confirm .btn:hover, .modal-confirm .btn:focus {
      background: #eda645;
      outline: none;
      #e6feff
    }

    .modal-confirm .btn.warn:hover, .modal-confirm .btn.warn:focus {
      background: #e6feff;
    }

    .modal-confirm .btn span {
      margin: 1px 3px 0;
      float: left;
    }
    .modal-confirm .btn i {
      margin-left: 1px;
      font-size: 20px;
      float: right;
    }
    .trigger-btn {
      display: inline-block;
      margin: 100px auto;
    }
    .modal-confirm .icon-box.warn {
      border: 5px solid #ffd9de;
      color: #de2e42;
    }
    .ask{
      text-align:center;
      border-top: 0;
    }
    .modal-confirm .modal-content.mar {
      padding-left: 60px;
      padding-right: 60px;
    }

    #loading {
      display: inline-block;
      width: 100px;
      height: 100px;
      border: 10px solid rgb(231,231,231);
      border-radius: 50%;
      border-top-color: #07a8f0;
      animation: spin 1s ease-in-out infinite;
      -webkit-animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { -webkit-transform: rotate(360deg); }
    }
    @-webkit-keyframes spin {
      to { -webkit-transform: rotate(360deg); }
    }
    .fixed {
      width: 150px;
      height: 180px;
    }
{% endblock %}


{% block script_head %}
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-19175540-9', 'auto');
    ga('send', 'pageview');

    window.onbeforeunload = function() {
      return "Jangan refresh ketika auto chooser berlangsung, anda yakin?";
    };
  </script>

{% endblock %}


{% block inside_body %}
<!-- Preloader -->
<div class="preloader">
  <div class="cssload-speeding-wheel"></div>
</div>

<!-- Page Content -->
  <div id="page-wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-2 col-md-2 col-sm-12 col-xs-col-xs-6">
          <h4 class="page-title">
            <button class="btn btn-primary" style="width: 100%;" data-toggle="modal" data-target="#myModal">Finance</button>
          </h4>
        </div>
      </div>
      {% checkusergroup in ['bo_finance','admin_full'] %}
      <div class="row">
          <div class="col-lg-1 col-sm-1 col-xs-6">
            <label class="label label-info text-default">To-Do</label>
          </div>
          <!-- END of Cahsback Buckets -->
          <!-- Paylater Buckets -->
          <div class="col-lg-1 col-sm-1 col-xs-6 fixed">
            <a href="{% url 'lender:repayment_upload' %}" id="app_paylater" target="_blank">
              <div class="panel panel-info">
                <div class="panel-heading" style="text-align: center; padding-left: 10px; padding-right: 10px">Lender Repayment
                </div>
                <div class="panel-wrapper collapse in" aria-expanded="true">
                  <div class="panel-body" style="padding: 16px">
                    <span class="status_font text-success" style="font-size: 18px">Check at 7 PM</span>
                  </div>
                </div>
              </div>
            </a>
          </div>

          <!-- Lender withdrawal bucket -->
          <div class="col-lg-1 col-sm-1 col-xs-6 fixed">
            <a href="{% url 'lender:withdrawal_list' %}" id="lender_withdrawal" target="_blank">
              <div class="panel panel-info">
                <div class="panel-heading" style="text-align: center; padding-left: 10px; padding-right: 10px">Lender Withdrawal
                </div>
                <div class="panel-wrapper collapse in" aria-expanded="true">
                  <div class="panel-body">
                    <span class="status_font text-success">{{lender_withdrawal_count}}</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <!-- Lender withdrawal bucket -->
          <div class="col-lg-1 col-sm-1 col-xs-6 fixed">
            <a href="{% url 'lender:reversal_payment_list' %}" id="reversal_trx" target="_blank">
              <div class="panel panel-info">
                <div class="panel-heading" style="text-align: center; padding-left: 10px; padding-right: 10px">Reversal Transaction
                </div>
                <div class="panel-wrapper collapse in" aria-expanded="true">
                  <div class="panel-body">
                    <span class="status_font text-success">{{reversal_trx_count}}</span>
                  </div>
                </div>
              </div>
            </a>
          </div>
      </div>
      {% endcheckusergroup %}
      <!--/.row -->
    </div>
    <!-- /.container-fluid -->
  </div>
  <!-- /#page-wrapper -->

{% endblock %}

{% block script_additional %}

  <!--Morris JavaScript -->
  <!-- <script src="{% static 'theme/plugins/bower_components/raphael/raphael-min.js' %}"></script> -->
  <!-- <script src="{% static 'theme/plugins/bower_components/morrisjs/morris.js' %}"></script> -->

  <!-- Custom Theme JavaScript -->
  <!-- <script src="{% static 'theme/nav-inverse/js/dashboard4.js' %}"></script> -->
  <script type="text/javascript">
    $(function(){
        $(".panel.panel-chat > .panel-heading > .chatMinimize").click(function(){
            if($(this).parent().parent().hasClass('mini'))
            {
                $(this).parent().parent().removeClass('mini').addClass('normal');

                $('.panel.panel-chat > .panel-body').animate({height: "350px"}, 500).show();

            }
            else
            {
                $(this).parent().parent().removeClass('normal').addClass('mini');

                $('.panel.panel-chat > .panel-body').animate({height: "0"}, 500);

                setTimeout(function() {
                    $('.panel.panel-chat > .panel-body').hide();
                    $('.panel.panel-chat > .panel-footer').hide();
                }, 500);


            }

        });
        $(".panel.panel-chat > .panel-heading > .chatClose").click(function(){
            $(this).parent().parent().remove();
        });
    })
    function copyToClipboard(text) {
        if (window.clipboardData && window.clipboardData.setData) {
            // IE specific code path to prevent textarea being shown while dialog is visible.
            return clipboardData.setData("Text", text);

        } else if (document.queryCommandSupported && document.queryCommandSupported("copy")) {
            var textarea = document.createElement("textarea");
            textarea.textContent = text;
            textarea.style.position = "fixed";  // Prevent scrolling to bottom of page in MS Edge.
            document.body.appendChild(textarea);
            textarea.select();
            try {
                return document.execCommand("copy");  // Security exception may be thrown by some browsers.
            } catch (ex) {
                console.warn("Copy to clipboard failed.", ex);
                return false;
            } finally {
                document.body.removeChild(textarea);
                $.toast({
                  heading: 'success',
                  text: 'success copy '+ text,
                  position: 'top-right',
                  loaderBg:'#ff6849',
                  icon: 'success',
                  hideAfter: 1500,
                  stack: 6
                });
            }
        }
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
  <script src="{% static 'theme/plugins/bower_components/toast-master/js/jquery.toast.js' %}"></script>
  <script type="text/javascript" src="{% static 'default/js/vue.js' %}"></script>
  <script src="{% static 'theme/plugins/moment/moment.min.js' %}"></script>

{% endblock %}

{% block script_bottom_inside %}
  $(document).ready(function() {

      // Executes when the HTML document is loaded and the DOM is ready
      //alert("Document is ready");
      $('#mnu_dashboard_li').addClass('active');
      $('#mnu_dashboard_li a:first').addClass('active');

      setInterval(function () {
        app1.get_bucket_count();
      }, 30000)
  });

  // Active
  window.addEventListener('focus', ActionActiveTab);

  // Inactive
  window.addEventListener('blur', ActionInactiveTab);

  function ActionActiveTab(){
    console.log('Active tab')
    app1.SetWindowTabStatus(true);
  }
  function ActionInactiveTab(){
    console.log('Inactive tab')
    app1.SetWindowTabStatus(false);
  }

{% endblock %}
