{% extends "common/theme1/crup/app_status_theme1.html" %}
{% load model %}
{% load unit %}
{% load static from staticfiles %}

{% block additional_title %}New Product{% endblock %}
 
{% block css_inside %}

{% endblock %}
{% block breadcrumb_title %}{% endblock %}
{% block breadcrumb_path %}{% endblock %}
 
{% block list_title %} 
{% endblock %}
{% block list_subtitle %}<h4> Detail Product</h4>{% endblock %}

{% block content-list %}
<div class="row m-b-12 p-t-0" id="product-profile-detail">
    <br />
    <div class="col-md-12 col-xs-12">
        <div class="row">
            <div class="col-md-12" style="text-align: center">
                <div v-if="!isEdit">
                    <button
                        class="button btn btn-danger"
                        v-on:click="Edit">
                        <i class="fa fa-pencil">
                        Edit</i>
                    </button>
                </div>
                <div v-else>
                    <button
                        class="button btn btn-primary"
                        v-on:click="updateProductProfile">
                        <i class="fa fa-save">
                        Save</i>
                    </button>
                    <button
                        class="button btn btn-danger"
                        v-on:click="Edit">
                        <i class="fa fa-times">
                        Cancel</i>
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-12 col-xs-12">
            <div class="panel col-sm-6 panel-default">
                <div class="panel-heading">
                    <h5>Product Profile</h5>
                </div>
                <div class="panel-body" :style="styleObject">
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">Product Code</label>
                            <input
                                type="text"
                                class="form-control"
                                name="product__code"
                                v-model="product.code"
                                required="true"
                                disabled
                            />
                        </div>
                        <div class="col-md-6">
                            <label for="code">Product Name</label>
                            <input
                                type="text"
                                class="form-control"
                                name="name__product_line_type"
                                :value="product.name"
                                @change="handleChange"
                                required="true" 
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">Min interest rate</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                name="min_interest_rate__min_interest_rate"
                                :value="product.min_interest_rate"
                                @change="handleChange"
                                :disabled="isEdit === false">
                            </input>
                        </div>
                        <div class="col-md-6">
                            <label for="code">Max interest rate</label>
                            <input
                                type="number"
                                class="form-control"
                                step="0.0000"
                                name="max_interest_rate__max_interest_rate"
                                :value="product.max_interest_rate"
                                @change="handleChange"
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">Min origination fee</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                name="product__min_origination_fee"
                                v-model="product.min_origination_fee"
                                :disabled="isEdit === false"/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">Max origination fee</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                name="product__max_origination_fee"
                                v-model="product.max_origination_fee"
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">interest rate increment</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                name="product__interest_rate_increment"
                                v-model="product.interest_rate_increment" 
                                :disabled="isEdit === false"/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">origination fee increment</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                v-model="product.origination_fee_increment"
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">Min Amount</label>
                            <input
                                type="number"
                                class="form-control"
                                name="min_amount__min_amount"
                                :value="product.min_amount"
                                @change="handleChange"
                                :disabled="isEdit === false"/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">Max Amount</label>
                            <input
                                type="number"
                                class="form-control"
                                name="max_amount__max_amount"
                                :value="product.max_amount"
                                @change="handleChange"
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">Min duration</label>
                            <input
                                type="number"
                                class="form-control"
                                name="min_duration__min_duration"
                                :value="product.min_duration"
                                @change="handleChange"
                                :disabled="isEdit === false"/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">Max duration</label>
                            <input
                                type="number"
                                class="form-control"
                                name="max_duration__max_duration"
                                :value="product.max_duration"
                                @change="handleChange"
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">payment frequency</label>
                            <select
                                type="text"
                                class="form-control"
                                name="payment_frequency__payment_frequency"
                                v-model="product.payment_frequency"
                                @change="handleChange"
                                required="true" 
                                :disabled="isEdit === false">
                                <option
                                    v-for="payment_freq in PAYMENT_FREQ_CHOICES"
                                    :value="payment_freq">
                                    <% payment_freq %>
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="code">late fee</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                name="product__late_fee"
                                v-model="product.late_fee"
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">cashback initial</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                name="product__cashback_initial"
                                v-model="product.cashback_initial" 
                                :disabled="isEdit === false"/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">cashback payment</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                name="product__cashback_payment"
                                v-model="product.cashback_payment"
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">debt income ratio</label>
                            <input
                                type="number"
                                step="0.0000"
                                class="form-control"
                                name="product__deb_income_ratio"
                                v-model="product.debt_income_ratio" 
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-3">
                            <input 
                                type="checkbox"
                                name="product__is_active"
                                @change="handleCheck"
                                :checked="product.is_active == true ? true : false" 
                                :disabled="isEdit === false"/>
                            &nbsp;&nbsp;
                            <label for="code">is active</label>
                        </div>
                        <div class="col-md-3">
                            <input 
                                type="checkbox"
                                name="product__is_initial"
                                @change="handleCheck"
                                :checked="product.is_initial == true ? true : false"
                                :disabled="isEdit === false"/>
                            &nbsp;&nbsp;
                            <label for="code">is initial</label>
                        </div>
                        <div class="col-md-6">
                            <input 
                                type="checkbox"
                                name="product__is_product_exclusive"
                                @change="handleCheck"
                                :checked="product.is_product_exclusive == true ? true : false" 
                                :disabled="isEdit === false"/>
                            &nbsp;&nbsp;
                            <label for="code">is product exclusive</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel col-sm-6 panel-default">
                <div class="panel-heading">
                    <h5>Customer Criteria</h5>
                </div>
                <div class="panel-body" :style="styleObject">
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">min age</label>
                            <input
                                type="number"
                                class="form-control"
                                name="customer_criteria__min_age"
                                v-model="customer_criteria.min_age"
                                :disabled="isEdit === false"/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">max age</label>
                            <input
                                type="number"
                                class="form-control"
                                name="customer_criteria__max_age"
                                v-model="customer_criteria.max_age"
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">min income</label>
                            <input
                                type="number"
                                class="form-control"
                                name="customer_criteria__min_income"
                                v-model="customer_criteria.min_income"
                                :disabled="isEdit === false"/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">max income</label>
                            <input
                                type="number"
                                class="form-control"
                                name="customer_criteria__max_income"
                                v-model="customer_criteria.max_income" 
                                :disabled="isEdit === false"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">job type</label>
                            <select
                                class="form-control"
                                name="customer_criteria__job_type"
                                v-model="customer_criteria.job_type"
                                multiple="multiple"
                                :disabled="isEdit === false">
                                <option
                                    v-for="job_type in JOB_TYPE_CHOICES"
                                    :value="job_type"> <%job_type%>
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="code">job industry</label>
                            <select
                                class="form-control"
                                v-model="customer_criteria.job_industry"
                                multiple="multiple"
                                :disabled="isEdit === false">
                                <option 
                                    v-for="job_industry in JOB_INDUSTRY_CHOICES"
                                    :value='job_industry'><%job_industry%></option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">job description</label>
                            <select
                                class="form-control"
                                v-model="customer_criteria.job_description"
                                multiple="multiple"
                                :disabled="isEdit === false">
                                <option 
                                    v-for="job_description in JOB_DESCRIPTION_CHOICES"
                                    :value='job_description'><%job_description%></option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="code">credit score</label>
                            <select
                                class="form-control"
                                v-model="customer_criteria.credit_score"
                                multiple="multiple"
                                :disabled="isEdit === false">
                                <option 
                                    v-for="credit_score in CREDIT_SCORE_CHOICES"
                                    :value='credit_score'>
                                    <%credit_score%>
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12 col-xs-12">
            <div class="panel col-sm-6 panel-default">
                <div class="panel-heading">
                    <h5>Product Line</h5>
                </div>
                <div class="panel-body" :style="styleObject">
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label>product line type</label>
                            <input
                                type="text"
                                class="form-control"
                                v-model="product_line.product_line_type" 
                                disabled/>
                        </div>
                        <div class="col-md-6">
                            <label>payment frequency</label>
                            <input
                                type="text"
                                class="form-control"
                                v-model="product_line.payment_frequency" 
                                disabled/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">min interest rate</label>
                            <input
                                type="number"
                                class="form-control"
                                v-model="product_line.min_interest_rate" 
                                disabled/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">max interest rate</label>
                            <input
                                type="number"
                                class="form-control"
                                v-model="product_line.max_interest_rate" 
                                disabled/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">min amount</label>
                            <input
                                type="number"
                                class="form-control"
                                v-model="product_line.min_amount" 
                                disabled/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">max amount</label>
                            <input
                                type="number"
                                class="form-control"
                                v-model="product_line.max_amount" 
                                disabled/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-6">
                            <label for="code">min duration</label>
                            <input
                                type="number"
                                class="form-control"
                                v-model="product_line.min_duration" 
                                disabled/>
                        </div>
                        <div class="col-md-6">
                            <label for="code">max duration</label>
                            <input
                                type="number"
                                class="form-control"
                                v-model="product_line.max_duration" 
                                disabled/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel col-sm-6 panel-default">
                <div class="panel-heading">
                    <h5>Product Lookup</h5>
                </div>
                <div class="panel-body" :style="styleObject">
                    <table class="table toggle-circle table-hover">
                        <thead>
                            <th>Product Name</th>
                            <th>Interest rate</th>
                            <th>Origination fee pct</th>
                            <th>Late fee pct</th>
                            <th>Cashback initial pct</th>
                            <th>Cashback payment pct</th>
                        </thead>
                        <tbody>
                            <tr v-for="product_lookup in product_lookup_list">
                                <td><%product_lookup.fields.product_name%></td>
                                <td><%product_lookup.fields.interest_rate%></td>
                                <td><%product_lookup.fields.origination_fee_pct%></td>
                                <td><%product_lookup.fields.late_fee_pct%></td>
                                <td><%product_lookup.fields.cashback_initial_pct%></td>
                                <td><%product_lookup.fields.cashback_payment_pct%></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% load static from staticfiles %}

{% block custom_link %}
<link href="{% static 'theme/plugins/bower_components/bootstrap-select/bootstrap-select.min.css' %}" rel="stylesheet" />
<link href="{% static 'theme/plugins/bower_components/toast-master/css/jquery.toast.css' %}" rel="stylesheet">
{% endblock %}

{% block script_additional %}
<script src="{% static 'theme/plugins/bower_components/bootstrap-select/bootstrap-select.min.js' %}" type="text/javascript"></script>
<script src="{% static 'theme/plugins/bower_components/toast-master/js/jquery.toast.js' %}"></script>
<!-- vue js -->
<script src="{% static 'default/js/vue.js' %}"></script>
<script src="{% static 'default/js/filter.js' %}"></script>
<script type="text/javascript">
    var ProductProfileDetail = new Vue({
        el: '#product-profile-detail',
        delimiters: ["<%", "%>"],
        data: {
            isEdit: false,
            csrftoken:'{{csrf_token}}',
            product_profile_id: '{{product_profile_id}}',
            product_line_grab: JSON.parse('{{product_line_grab}}'),
            product: {
                id: null,
            },
            customer_criteria: {
                id: null,
                job_type: [],
                job_industry: [],
                job_description: [],
            },
            product_line: {
                id: null,
            },
            product_lookup_list: [],
            JOB_TYPE_CHOICES: [],
            JOB_INDUSTRY_CHOICES: [],
            JOB_DESCRIPTION_CHOICES: [],
            CREDIT_SCORE_CHOICES: [],
            PAYMENT_FREQ_CHOICES: [],
            valid_code: true,
            valid_name: null,
            valid_min_amount: null,
            valid_max_amount: null,
            valid_min_duration: null,
            valid_max_duration: null,
            valid_min_interest_rate: null,
            valid_max_interest_rate: null,
            valid_interest_rate_increment: null,
            valid_min_origination_fee: null,
            valid_max_origination_fee: null,
            valid_origination_fee_increment: null,
            valid_payment_frequency: null,
            valid_valid_late_fee: null,
            valid_cashback_payment: null,
            valid_cashback_initial: null,
            styleObject: {
                overflowY: 'scroll',
                height: '42vh'
            }
        },
        beforeMount(){
            self = this
            $.ajax({
                url :  "{%url 'product_profile:ajax_get_detail' %}", // the endpoint
                type : "GET", // http method
                data : {
                  product_profile_id: '{{product_profile_id}}',
                }, // data sent with the get request
                  // handle a successful response
                success : function(json) {
                    console.log(json)
                    self.product = json.product_profile.fields !== undefined ? 
                                   json.product_profile.fields : {}
                    self.product.id = json.product_profile.pk
                    self.customer_criteria = json.product_customer_criteria.fields !== undefined ?
                                             json.product_customer_criteria.fields : {}
                    self.customer_criteria.id = json.product_customer_criteria.pk
                    self.customer_criteria.job_type = json.product_customer_criteria.fields.job_type !== null ? 
                        JSON.parse(json.product_customer_criteria.fields.job_type) : []
                    self.customer_criteria.job_industry = json.product_customer_criteria.fields.job_industry !== null ? 
                        JSON.parse(json.product_customer_criteria.fields.job_industry) : []
                    self.customer_criteria.job_description = json.product_customer_criteria.fields.job_description !== null ? 
                        JSON.parse(json.product_customer_criteria.fields.job_description) : []
                    self.customer_criteria.credit_score = json.product_customer_criteria.fields.credit_score !== null ? 
                        JSON.parse(json.product_customer_criteria.fields.credit_score) : []
                    self.customer_criteria.location = json.product_customer_criteria.fields.location !== null ? 
                        JSON.parse(json.product_customer_criteria.fields.location) : []
                    self.product_line = json.product_line.fields !== undefined ?
                                        json.product_line.fields : {}
                    self.product_line.product_line_code = json.product_line.pk
                    self.product_lookup_list = json.product_lookup_list
                    self.JOB_TYPE_CHOICES = json.JOB_TYPE_CHOICES
                    self.JOB_INDUSTRY_CHOICES = json.JOB_INDUSTRY_CHOICES
                    self.JOB_DESCRIPTION_CHOICES = json.JOB_DESCRIPTION_CHOICES
                    self.CREDIT_SCORE_CHOICES = json.CREDIT_SCORE_CHOICES
                    self.PAYMENT_FREQ_CHOICES = json.PAYMENT_FREQ_CHOICES
                },
                  // handle a non-successful response
                error : function(xhr,errmsg,err) {
                    console.log(xhr)
                    self.ToastDanger('failed get product profile')
                }
            });
        },
        methods: {
            reAssignEmptyFields: function() {
                self = this
                // Product
                if (self.product.min_interest_rate === '') {
                    self.product.min_interest_rate = '0.0000'
                }
                if (self.product.max_interest_rate === '') {
                    self.product.max_interest_rate = '0.0000'
                }
                if (self.product.interest_rate_increment === '') {
                    self.product.interest_rate_increment = '0.0000'
                }
                if (self.product.min_origination_fee === '') {
                    self.product.min_origination_fee = '0.0000'
                }
                if (self.product.max_origination_fee === '') {
                    self.product.max_origination_fee = '0.0000'
                }
                if (self.product.origination_fee_increment === '') {
                    self.product.origination_fee_increment = '0.0000'
                }
                if (self.product.cashback_initial === '') {
                    self.product.cashback_initial = '0.0000'
                }
                if (self.product.cashback_payment === '') {
                    self.product.cashback_payment = '0.0000'
                }
                if (self.product.late_fee === '') {
                    self.product.late_fee = '0.000'
                }
                if (self.product.debt_income_ratio === '') {
                    self.product.debt_income_ratio = null
                }
                // Customer Criteria
                if (self.customer_criteria.min_age === '') {
                    self.customer_criteria.min_age = null
                }
                if (self.customer_criteria.max_age === '') {
                    self.customer_criteria.max_age = null
                }
                if (self.customer_criteria.min_income === '') {
                    self.customer_criteria.min_income = null
                }
                if (self.customer_criteria.max_income === '') {
                    self.customer_criteria.max_income = null
                }
            },
            integerFieldValidation: function() {
                self = this
                if (String(self.product.min_amount).indexOf('.') !== -1) {
                    self.ToastDanger('invalid value', 'min amount could not be decimal value!!')
                    return false
                }
                if (String(self.product.max_amount).indexOf('.') !== -1) {
                    self.ToastDanger('invalid value', 'max amount could not be decimal value!!')
                    return false
                }
                if (String(self.product.min_duration).indexOf('.') !== -1) {
                    self.ToastDanger('invalid value', 'min duration could not be decimal value!!')
                    return false
                }
                if (String(self.product.max_duration).indexOf('.') !== -1) {
                    self.ToastDanger('invalid value', 'max duration could not be decimal value!!')
                    return false
                }
                // Customer Criteria
                if (self.customer_criteria.min_age !== null) {
                    if (String(self.customer_criteria.min_age).indexOf('.') !== -1) {
                        self.ToastDanger('invalid value', 'min age could not be decimal value!!')
                        return false 
                    }
                }
                
                if (self.customer_criteria.max_age !== null) {
                    if (String(self.customer_criteria.max_age).indexOf('.') !== -1) {
                        self.ToastDanger('invalid value', 'max age could not be decimal value!!')
                        return false 
                    }
                }

                if (self.customer_criteria.min_income !== null) {
                    if (String(self.customer_criteria.min_income).indexOf('.') !== -1) {
                        self.ToastDanger('invalid value', 'min income could not be decimal value!!')
                        return false 
                    }
                }

                if (self.customer_criteria.max_income !== null) {
                    if (String(self.customer_criteria.max_income).indexOf('.') !== -1) {
                        self.ToastDanger('invalid value', 'max income could not be decimal value!!')
                        return false 
                    }
                }

                return true
            },
            requiredFieldValidation: function() {
                self = this
                if (self.product.name === null || self.product.name === "") {
                    self.ToastDanger('missing required field', 'product name could not be empty!!')
                    return false
                }
                if (self.product.min_amount === null || self.product.min_amount === "") {
                    self.ToastDanger('missing required field', 'min amount could not be empty!!')
                    return false
                }
                if (self.product.max_amount === null || self.product.max_amount === "") {
                    self.ToastDanger('missing required field', 'max amount could not be empty!!')
                    return false
                }
                if (self.product.min_duration === null || self.product.min_duration === "") {
                    self.ToastDanger('missing required field', 'min duration could not be empty!!')
                    return false
                }
                if (self.product.max_duration === null || self.product.max_duration === "") {
                    self.ToastDanger('missing required field', 'max duration could not be empty!!')
                    return false
                }

                return true
            },
            updateProductProfile: function() {
                self = this
                self.reAssignEmptyFields();

                if (self.requiredFieldValidation() === true && 
                    self.integerFieldValidation() === true) {
                    $.ajax({
                        url :  "{%url 'product_profile:ajax_update_detail' %}", // the endpoint
                        type : "POST", // http method
                        data : {
                          product_profile: JSON.stringify(self.product),
                          customer_criteria: JSON.stringify(self.customer_criteria),
                          product_line: JSON.stringify(self.product_line),
                          csrfmiddlewaretoken: self.csrftoken
                        }, // data sent with the get request
                          // handle a successful response
                        success : function(json) {
                            self.ToastSuccess('success update product profile')
                            window.location.href = json.url
                        },
                          // handle a non-successful response
                        error : function(xhr,errmsg,err) {
                            console.log(xhr, errmsg, err)
                            self.ToastDanger('failed update product profile!!',
                                xhr.responseText)
                        }
                    });
                }
            },
            handleChange: function(e) {
                self = this
                product_field = e.target.name.split('__')[0]
                product_line_field = e.target.name.split('__')[1]
                if (product_field === 'min_interest_rate' || product_field === 'max_interest_rate') {
                    if (e.target.value === '') {
                        e.target.value = '0.0000'
                    }
                }
                self.product[product_field] = e.target.value
                self.product_line[product_line_field] = e.target.value
                console.log(self)
            },
            handleCheck: function(e) {
                self = this
                model_name = e.target.name.split('__')[0]
                field_name = e.target.name.split('__')[1]
                self[model_name][field_name] = !JSON.parse(self[model_name][field_name])
            },
            handleMultipleChange: function(e) {
                val_arr = e.target.value.toLowerCase().replace(/, /g, ',').replace(/ ,/g, ',').split(',')
                model_name = e.target.name.split('__')[0]
                field_name = e.target.name.split('__')[1]
                self[model_name][field_name] = val_arr
            },
            ToastSuccess: function(header_msg, body_message){
             $.toast({
               heading: header_msg,
               text: body_message,
               position: 'top-right',
               loaderBg:'#ff6849',
               icon: 'success',
               hideAfter: 1500,
               stack: 6
             });
            },
            ToastDanger: function(header_msg, body_message){
             $.toast({
               heading: header_msg,
               text: body_message,
               position: 'top-right',
               loaderBg:'#ff6849',
               icon: 'error',
               hideAfter: 2800
             });
            },
            Edit: function(){
                if(!self.product_line_grab.includes(self.product_line.product_line_code)) {
                    this.isEdit = !this.isEdit
                } else {
                    self.ToastDanger('cannot edit grab product!!')
                }
                
            },
            float: function(value) {
                if (value == 0) {
                    return '0.0000'
                } else {
                  return value  
                } 
            },
        },
        filters: {
            float(value) {
                if (value == 0 || value === '0') {
                    return '0.0000'
                } else {
                  return value  
                } 
            },
        }
    });
</script>
{% endblock %}