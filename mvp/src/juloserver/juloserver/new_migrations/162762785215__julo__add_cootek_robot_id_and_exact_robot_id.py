# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2021-07-30 06:50
from __future__ import unicode_literals

from django.db import migrations, models, connection


def migrate_robot_type_custom_robot_id(apps, schema_editor):
    with connection.cursor() as cursor:
        cursor.execute('UPDATE ops.cootek_robocall SET cootek_robot_id = (SELECT cootek_robot_id FROM ops.cootek_robot WHERE robot_name = ops.cootek_robocall.robot_type LIMIT 1)')


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.AddField(
            model_name='cootekrobocall',
            name='exact_robot_id',
            field=models.CharField(blank=True, max_length=50, null=True),
        ),
        migrations.AddField(
            model_name='cootekrobocall',
            name='cootek_robot',
            field=models.ForeignKey(blank=True, db_column='cootek_robot_id', null=True, on_delete=models.deletion.DO_NOTHING, to='cootek.CootekRobot'),
        ),
        migrations.RunPython(migrate_robot_type_custom_robot_id),
    ]
