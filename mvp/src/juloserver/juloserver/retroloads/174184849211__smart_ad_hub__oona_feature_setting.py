# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2025-03-13 06:48
from __future__ import unicode_literals

from django.db import migrations
from django.conf import settings

from juloserver.julo.models import FeatureSetting
from juloserver.smart_ad_hub.constants import OonaPlatformConst


def create_oona_feature_setting(apps, schema_editor):
    if FeatureSetting.objects.filter(feature_name=OonaPlatformConst.OONA_FEATURE_NAME).exists():
        return

    domain_url = 'https://partner.preprod.myoona.id'
    if settings.ENVIRONMENT == 'prod':
        domain_url = 'https://partner.myoona.id'
    elif settings.ENVIRONMENT == 'uat':
        domain_url = 'https://partner.uat.myoona.id'

    FeatureSetting.objects.create(
        is_active=True,
        feature_name=OonaPlatformConst.OONA_FEATURE_NAME,
        parameters={
            "urls": {
                "three_critical_illness": domain_url + "/julo/app/critical-illness/big3#?payload={}&utm_source=partnership&utm_medium=partnership_julo&utm_campaign=julo_big3&utm_term=Big3-Julo&utm_content=Big3-Julo",
                "heart_attack": domain_url + "/julo/app/critical-illness/heart-attack#?payload={}&utm_source=partnership&utm_medium=partnership_julo&utm_campaign=julo_ha&utm_term=HA-Julo&utm_content=HA-Julo",
            },
        }
    )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(create_oona_feature_setting, migrations.RunPython.noop)
    ]
