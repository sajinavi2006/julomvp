# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2025-04-30 06:08
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.constants import WorkflowConst
from juloserver.julo.models import Workflow, WorkflowStatusNode, WorkflowStatusPath


def add_merchant_financing_workflow_status_path_and_node(apps, _schema_editor):
    workflow = Workflow.objects.filter(name=WorkflowConst.MF_STANDARD_PRODUCT_WORKFLOW).last()

    if workflow:
        WorkflowStatusNode.objects.get_or_create(
            status_node=141, handler='PartnershipMF141Handler', workflow=workflow
        )

        WorkflowStatusNode.objects.get_or_create(
            status_node=133, handler='PartnershipMF133Handler', workflow=workflow
        )

        WorkflowStatusPath.objects.get_or_create(
            status_previous=130, status_next=141, type="happy", workflow=workflow
        )

        WorkflowStatusPath.objects.get_or_create(
            status_previous=141, status_next=190, type="happy", workflow=workflow
        )

        WorkflowStatusPath.objects.get_or_create(
            status_previous=141, status_next=133, type="graveyard", workflow=workflow
        )


class Migration(migrations.Migration):
    dependencies = []
    operations = [
        migrations.RunPython(
            add_merchant_financing_workflow_status_path_and_node, migrations.RunPython.noop
        ),
    ]
