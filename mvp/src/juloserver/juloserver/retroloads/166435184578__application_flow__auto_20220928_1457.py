# -*- coding: utf-8 -*-
# Generated by Django 1.9.13 on 2022-09-28 07:57
from __future__ import unicode_literals

from django.db import migrations
from django.utils import timezone

from juloserver.julo.constants import ExperimentConst
from juloserver.julo.models import ExperimentSetting


def add_experiment_setting_for_shopee_scoring(apps, schema_editor):
    code = 'ShopeeScoring'
    exists = ExperimentSetting.objects.filter(code=code).exists()
    if not exists:
        ExperimentSetting.objects.create(
            code=code,
            name=ExperimentConst.SHOPEE_SCORING,
            start_date=timezone.localtime(timezone.now()),
            end_date=timezone.localtime(timezone.now()),
            criteria={"pgood_threshold": 0.85, "application_id": "#last:1,2,3,4"},
            type="application",
            is_active=True,
            is_permanent=False,
        )


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(add_experiment_setting_for_shopee_scoring, migrations.RunPython.noop),
    ]
