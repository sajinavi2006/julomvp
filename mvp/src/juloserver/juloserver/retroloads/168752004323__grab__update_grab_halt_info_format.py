# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-06-23 11:34
from __future__ import unicode_literals

from django.db import migrations
from juloserver.grab.models import GrabLoanData
from juloserver.grab.tasks import task_update_account_halt_info_format


def update_grab_account_halt_info(apps, schema_editor):
    grab_loan_ids = GrabLoanData.objects.filter(
        account_halt_info__isnull=False
    ).values_list('loan_id', flat=True)
    for loan_id in grab_loan_ids.iterator():
        task_update_account_halt_info_format.delay(loan_id)


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(update_grab_account_halt_info, migrations.RunPython.noop)
    ]
