# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2021-08-08 19:57
from __future__ import unicode_literals
from juloserver.otp.constants import EmailOTP

from django.db import migrations


def retroload_template_code_and_reply_to_for_email_otp(apps, schema_editor):
    EmailHistory = apps.get_model("julo", "EmailHistory")
    change_email_histories = EmailHistory.objects.filter(
        template_code=EmailOTP.TEMPLATE,
        message_content__icontains='pergantian')
    fraud_email_histories = EmailHistory.objects.filter(
        template_code=EmailOTP.TEMPLATE,
        message_content__icontains='keamanan')
    change_email_histories.update(template_code='email_change_otp')
    fraud_email_histories.update(template_code='login_fraud_otp')
    


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(retroload_template_code_and_reply_to_for_email_otp, migrations.RunPython.noop)
    ]
