# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-08-22 10:43
from __future__ import unicode_literals

from django.db import migrations

from juloserver.followthemoney.constants import LoanAgreementType
from juloserver.followthemoney.models import LoanAgreementTemplate, LenderCurrent


def create_bss_channeling_skrtp_template(apps, _schema_editor):
    base_template = LoanAgreementTemplate.objects.get_or_none(
        lender=LenderCurrent.objects.get(lender_name='jtp'),
        is_active=True,
        agreement_type=LoanAgreementType.SKRTP
    )
    if not base_template:
        return

    LoanAgreementTemplate.objects.create(
        lender=LenderCurrent.objects.get(lender_name='bss_channeling'),
        agreement_type=LoanAgreementType.SKRTP,
        body=base_template.body.replace(
            '<div>Kuasa Direksi</div>',
            '<div>{{ poc_position }}</div>'
        ),
        is_active=True
    )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(create_bss_channeling_skrtp_template, migrations.RunPython.noop)
    ]
