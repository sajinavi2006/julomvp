# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-02-28 10:10
from __future__ import unicode_literals

from datetime import (
    datetime,
    timedelta,
)

from django.db import migrations

from juloserver.cootek.models import CootekConfiguration


def data_seed_end_time_for_cootek_configuration(app, schema_editor):
    cootek_configurations = CootekConfiguration.objects.filter(
        criteria__isnull=True, time_to_end__isnull=True)
    for cootek_config in cootek_configurations:
        start_time = datetime.strptime(str(cootek_config.time_to_start), '%X')
        end_time = start_time + timedelta(hours=1)
        cootek_config.update_safely(time_to_end=end_time.strftime('%X'))


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(data_seed_end_time_for_cootek_configuration, migrations.RunPython.noop),
    ]
