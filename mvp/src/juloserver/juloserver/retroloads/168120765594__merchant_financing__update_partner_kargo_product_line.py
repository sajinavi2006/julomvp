# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-04-11 10:07
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import Partner, ProductLine

from juloserver.portal.object.bulk_upload.constants import MerchantFinancingCSVUploadPartner
from juloserver.julo.product_lines import ProductLineCodes


def update_partner_kargo_product_line(apps, schema_editor):
    partner = Partner.objects.filter(name=MerchantFinancingCSVUploadPartner.KARGO).last()
    if partner:
        product_line = ProductLine.objects.filter(
            product_line_code=ProductLineCodes.KARGO).last()
        if product_line:
            partner.product_line=product_line
            partner.save(update_fields=['product_line'])


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(update_partner_kargo_product_line, migrations.RunPython.noop)
    ]
