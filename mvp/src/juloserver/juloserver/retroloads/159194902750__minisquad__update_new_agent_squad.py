# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2019-12-03 07:06
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.models import Agent
from juloserver.minisquad.models import CollectionSquad


def update_squad_in_agent_data(apps, schema_editor):
    bucket_2_squad_1 = CollectionSquad.objects.get(squad_name='B2.S1')
    bucket_2_squad_2 = CollectionSquad.objects.get(squad_name='B2.S2')
    bucket_3_squad_1 = CollectionSquad.objects.get(squad_name='B3.S1')
    bucket_3_squad_2 = CollectionSquad.objects.get(squad_name='B3.S2')
    bucket_3_squad_3 = CollectionSquad.objects.get(squad_name='B3.S3')
    bucket_4_squad_1 = CollectionSquad.objects.get(squad_name='B4.S1')

    squad_ids = [
        bucket_2_squad_1.id, bucket_2_squad_2.id,
        bucket_3_squad_1.id, bucket_3_squad_2.id,
        bucket_3_squad_3.id, bucket_4_squad_1.id]
    collection_squad_agent_dict = {
        bucket_2_squad_1.id: ['ulfa_indiriani', 'Ronaldo_thiery', 'maul_fitriani'],
        bucket_2_squad_2.id: ['Fima_ nabila', 'andre_afredo', 'alya_rahma'],
        bucket_3_squad_1.id: ['ardhea_nuryani', 'fajarudin', 'nur_wahyuningsih', 'witri_harini'],
        bucket_3_squad_2.id: ['kanty_rubiyanti' 'rahayu_safitri', 'rofikoh_nurihati', 'zico_pratama'],
        bucket_3_squad_3.id: ['achmad_mulyadi', 'diah_tri_k', 'shifa_asmadewanti', 'joko_saputro'],
        bucket_4_squad_1.id: ['bunga_prima_resti', 'fajar_setiawan', 'wili_afran', 'saptaning_budi']
    }

    for squad_id in squad_ids:
        for agent_username in collection_squad_agent_dict[squad_id]:
            agent = Agent.objects.filter(user__username=agent_username).last()
            if agent:
                agent.update_safely(squad_id=squad_id)


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(update_squad_in_agent_data)
    ]
