# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-06-11 06:58
from __future__ import unicode_literals

from django.db import migrations
from juloserver.customer_module.models import BankAccountCategory
from juloserver.customer_module.constants import BankAccountCategoryConst
from juloserver.julo.models import Bank
from juloserver.grab.models import PaymentGatewayVendor, PaymentGatewayBankCode


def create_bank_info_for_ayc_ewallet(apps, schema_editor):
    BankAccountCategory.objects.get_or_create(
        id=10,
        category=BankAccountCategoryConst.EWALLET,
        display_label=BankAccountCategoryConst.EWALLET.title(),
        parent_category_id=10,
    )

    list_new_banks = {"ShopeePay": "APIDIDJ1", "OVO": "ACRIOVO1", "GoPay": "ACRIGPY1"}
    list_created_banks = []
    for new_bank in list_new_banks:
        bank_code = list_new_banks[new_bank]
        bank, _ = Bank.objects.get_or_create(
            bank_code=bank_code,
            bank_name=new_bank,
            swift_bank_code=bank_code,
            xfers_bank_code=bank_code,
            instamoney_bank_code=bank_code,
            xendit_bank_code=bank_code,
            is_active=True,
            bank_name_frontend=new_bank,
        )
        list_created_banks.append(bank)

    payment_gateway_vendor = PaymentGatewayVendor.objects.get_or_none(name="ayoconnect")
    for created_bank in list_created_banks:
        PaymentGatewayBankCode.objects.get_or_create(
            bank_id=created_bank.pk,
            is_active=True,
            swift_bank_code=created_bank.bank_code,
            payment_gateway_vendor_id=payment_gateway_vendor.pk,
        )


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(
            create_bank_info_for_ayc_ewallet,
            migrations.RunPython.noop,
        ),
    ]
