# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-12-19 02:49
from __future__ import unicode_literals

from django.db import migrations

from juloserver.partnership.constants import PartnershipFeatureNameConst
from juloserver.partnership.models import PartnershipFeatureSetting


def update_or_create_partnership_digisign_feature_settings(apps, schema_editor):
    digisign_feature_setting = PartnershipFeatureSetting.objects.filter(
        feature_name=PartnershipFeatureNameConst.PARTNERSHIP_DIGISIGN_PRICING,
    ).first()
    new_parameters = {
        "axiata": {
            "is_active": True,
            "fee_type": {
                "borrower_sign": {"fee_amount": 500, "charged_to": "borrower"},
                "lender_sign": {"fee_amount": 500, "charged_to": "lender"},
                "julo_sign": {"fee_amount": 500, "charged_to": "partner"},
                "ekyc": {"fee_amount": 500, "charged_to": "borrower"},
            },
        },
        "efishery": {
            "is_active": False,
            "fee_type": {
                "borrower_sign": {"fee_amount": 500, "charged_to": "borrower"},
                "lender_sign": {"fee_amount": 500, "charged_to": "lender"},
                "julo_sign": {"fee_amount": 500, "charged_to": "partner"},
                "ekyc": {"fee_amount": 500, "charged_to": "borrower"},
            },
        },
    }
    if digisign_feature_setting:
        digisign_feature_setting.parameters = new_parameters
        digisign_feature_setting.save()
    else:
        PartnershipFeatureSetting.objects.create(
            feature_name=PartnershipFeatureNameConst.PARTNERSHIP_DIGISIGN_PRICING,
            is_active=True,
            parameters=new_parameters,
            description='partnership digisign pricing',
            category='partnership',
        )


class Migration(migrations.Migration):
    dependencies = []

    operations = [
        migrations.RunPython(
            update_or_create_partnership_digisign_feature_settings,
            migrations.RunPython.noop,
        ),
    ]
