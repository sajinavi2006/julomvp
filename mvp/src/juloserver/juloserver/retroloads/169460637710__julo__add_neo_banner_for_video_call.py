# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-09-13 11:59
from __future__ import unicode_literals

import json
from django.db import migrations
from juloserver.streamlined_communication.models import NeoBannerCard
from juloserver.julo.models import Image


class ImageNames(object):
    BANNER_100_VIDEO_CALL = 'neo-banner/JULO-System_Icon_24-07.jpg'


def create_image(image_source_id, image_type, image_url):
    image = Image()
    image.image_source = image_source_id
    image.image_type = image_type
    image.url = image_url
    image.save()


def retroload_change_x100_neo_banner_status_name(_apps, _schema_editor):
    x100_form = NeoBannerCard.objects.filter(statuses__contains='100').last()
    if x100_form is not None:
        x100_form.statuses = '[100_FORM]'
        x100_form.save()


def retroload_video_call_neo_banner(_apps, _schema_editor):
    x100_video_call_data = {
        'statuses': '[100_VIDEO_CALL]',
        'product': 'J1',
        'template_card': 'B_BUTTON',
        'top_image': ImageNames.BANNER_100_VIDEO_CALL,
        'top_title': 'Video Call untuk Ajukan Limitmu, Yuk!',
        'top_message': 'Kamu akan terhubung langsung dengan agen JULO. Yuk, ajukan sekarang!',
        'button_text': 'Mulai Video Call',
        'button_action': 'video_webview',
        'extended_image': None,
        'extended_title': None,
        'extended_message': None,
        'extended_button_text': None,
        'extended_button_action': None,
        'top_info_icon': None,
        'top_info_title': "Jam Operasional (Waktu Indonesia Barat)",
        'top_info_message': "Senin-Jumat: 08.00-20.00<br>Sabtu-Minggu/Libur Nasional: 08.00-17.00",
        'is_active': True
    }

    video_call_neo_banner = NeoBannerCard.objects.create(**x100_video_call_data)
    create_image(video_call_neo_banner.id, 'NEO_BANNER_TOP_BACKGROUND_IMAGE', x100_video_call_data['top_image'])


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(retroload_change_x100_neo_banner_status_name, migrations.RunPython.noop),
        migrations.RunPython(retroload_video_call_neo_banner, migrations.RunPython.noop),
    ]
