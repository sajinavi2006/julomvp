# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-12-17 06:49
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import FeatureSetting
from juloserver.minisquad.constants import (
    FeatureNameConst,
    NewPDSExperiment,
)


def change_params_on_feature_setting_poc_experiment(apps, schema_editor):
    bucket_name = NewPDSExperiment.B2_EXPERIMENT
    feature_group_mapping_config = FeatureSetting.objects.filter(
        feature_name=FeatureNameConst.AI_RUDDER_TASKS_STRATEGY_CONFIG
    ).last()

    if not feature_group_mapping_config:
        return
    params = feature_group_mapping_config.parameters
    param_dict = {
        "autoQA": "N",
        "acwTime": "30",
        "ringLimit": "0",
        "slotFactor": "",
        "dialingMode": "0",
        "maxLostRate": "5",
        "qaLimitRate": "100",
        "repeatTimes": "3",
        "callInterval": "0",
        "dialingOrder": [
            'mobile_phone_1',
            'mobile_phone_2',
            'no_telp_pasangan',
            'telp_perusahaan',
            'no_telp_kerabat',
        ],
        "qaLimitLength": "0",
        "autoSlotFactor": "1",
        "bulkCallInterval": "300",
        "resultStrategies": "on",
        "contactNumberInterval": "300",
        "resultStrategiesConfig": [],
        "start_time": "08:00",
        "end_time": "20:00",
        "rest_times": [["12:00", "13:00"]],
    }
    params.update({bucket_name: param_dict})
    feature_group_mapping_config.parameters = params
    feature_group_mapping_config.save()


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(
            change_params_on_feature_setting_poc_experiment, migrations.RunPython.noop
        )
    ]
