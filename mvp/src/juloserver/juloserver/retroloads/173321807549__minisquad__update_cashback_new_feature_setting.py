# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-12-03 09:27
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import FeatureSetting
from juloserver.minisquad.constants import FeatureNameConst


def add_banner_for_cashback_new_scheme(apps, schema_editor):
    banner_dict = dict()
    for i in range(1, 6):
        key = i
        if i in (1, 2):
            i = 1
        elif i in (3, 4):
            i = 2
        else:
            i = 4
        banner_dict.update(
            {
                "{}".format(key): {
                    "active_icon": "https://julocampaign.julo.co.id/collection/{}_active.png".format(
                        i
                    ),
                    "inactive_icon": "https://julocampaign.julo.co.id/collection/{}_inactive.png".format(
                        i
                    ),
                    "incoming_icon": "https://julocampaign.julo.co.id/collection/{}_incoming.png".format(
                        i
                    ),
                }
            }
        )
    feature_setting = FeatureSetting.objects.filter(
        feature_name=FeatureNameConst.CASHBACK_NEW_SCHEME
    ).last()
    exists_parameter = feature_setting.parameters
    exists_parameter['safe_due_date'] = -5
    exists_parameter['cashback_banners'] = banner_dict

    feature_setting.update_safely(parameters=exists_parameter)


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(add_banner_for_cashback_new_scheme, migrations.RunPython.noop)
    ]
