# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-08-16 03:11
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.models import FeatureSetting
from juloserver.minisquad.constants import (
    FeatureNameConst,
    DialerSystemConst,
)


def create_feature_settings_ai_rudder(apps, _schema_editor):
    bucket_3 = DialerSystemConst.DIALER_BUCKET_3
    bucket_3_nc = DialerSystemConst.DIALER_BUCKET_3_NC
    bucket_3_jturbo = DialerSystemConst.DIALER_JTURBO_B3
    bucket_3_nc_jturbo = DialerSystemConst.DIALER_JTURBO_B3_NON_CONTACTED
    bucket_3_cohort = 'cohort_campaign_{}'.format(DialerSystemConst.DIALER_BUCKET_3)
    bucket_3_nc_cohort = 'cohort_campaign_{}'.format(DialerSystemConst.DIALER_BUCKET_3_NC)
    bucket_3_special = DialerSystemConst.DIALER_SPECIAL_COHORT.format(
        DialerSystemConst.DIALER_BUCKET_3)
    bucket_3_nc_special = DialerSystemConst.DIALER_SPECIAL_COHORT.format(
        DialerSystemConst.DIALER_BUCKET_3_NC)
    bucket_3_jturbo_cohort = 'cohort_campaign_{}'.format(DialerSystemConst.DIALER_JTURBO_B3)
    bucket_3_jturbo_nc_cohort = 'cohort_campaign_{}'.format(DialerSystemConst.DIALER_JTURBO_B3_NON_CONTACTED)
    bucket_3_jturbo_special = DialerSystemConst.DIALER_SPECIAL_COHORT.format(
        DialerSystemConst.DIALER_JTURBO_B3)
    bucket_3_jturbo_nc_special = DialerSystemConst.DIALER_SPECIAL_COHORT.format(
        DialerSystemConst.DIALER_JTURBO_B3_NON_CONTACTED)

    FeatureSetting.objects.create(
        feature_name=FeatureNameConst.AI_RUDDER_GROUP_NAME_CONFIG,
        parameters={
            bucket_3: 'Group_Bucket3',
            bucket_3_nc: 'Group_Bucket3',
            bucket_3_jturbo: 'Group_Bucket3',
            bucket_3_nc_jturbo: 'Group_Bucket3',
            bucket_3_cohort: 'Group_Bucket3',
            bucket_3_nc_cohort: 'Group_Bucket3',
            bucket_3_special: 'Group_Bucket3',
            bucket_3_nc_special: 'Group_Bucket3',
            bucket_3_jturbo_cohort: 'Group_Bucket3',
            bucket_3_jturbo_nc_cohort: 'Group_Bucket3',
            bucket_3_jturbo_special: 'Group_Bucket3',
            bucket_3_jturbo_nc_special: 'Group_Bucket3',
        },
        is_active=True,
        category="dialer",
        description="configure agent role for working on each bucket"
    )
    config = {
        bucket_3: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_nc: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_jturbo: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_nc_jturbo: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_cohort: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_nc_cohort: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_special: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_nc_special: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_jturbo_cohort: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_jturbo_nc_cohort: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_jturbo_special: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
        bucket_3_jturbo_nc_special: dict(
            start_time='08:00', end_time='20:00', start_rest_time='12:00', end_rest_time='13:00',
            autoSlotFactor=1, callInterval=0, acwTime=20, maxLostRate=5,
            contactNumberInterval=300, ringLimit=0, dialingMode=0, repeatTimes=5,
            bulkCallInterval=300
        ),
    }
    FeatureSetting.objects.create(
        feature_name=FeatureNameConst.AI_RUDDER_TASKS_STRATEGY_CONFIG,
        parameters=config,
        is_active=True,
        category="dialer",
        description="Task strategy for calling customer"
    )
    FeatureSetting.objects.create(
        feature_name=FeatureNameConst.AI_RUDDER_SEND_SLACK_ALERT,
        parameters={
            'bucket_list': [bucket_3, bucket_3_nc]
        },
        is_active=True,
        category="dialer",
        description="for alert to our slack channel"
    )
    FeatureSetting.objects.create(
        feature_name=FeatureNameConst.AI_RUDDER_SEND_BATCHING_THRESHOLD,
        parameters={
            bucket_3: 5000 ,
            bucket_3_nc: 5000,
        },
        is_active=True,
        category="dialer",
        description="for determine how much data in one pages for hit data to ai rudder"
    )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(create_feature_settings_ai_rudder, migrations.RunPython.noop),
    ]
