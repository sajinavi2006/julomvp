# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-03-08 02:54
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.models import FeatureSetting
from juloserver.julo.constants import FeatureNameConst


def add_gtl_cross_platform_feature_setting(app, schema_editor):
    self_method_id = 1
    message = (
        "Harap coba lagi dalam {{waiting_days}} hari, ya. "
        "Tapi, fitur transaksi JULO lainnya masih bisa, kok. "
        "Untuk info lebih lanjut, silakan hubungi CS JULO."
    )
    default_blocking_days = 14

    params = {
        'block_time_in_hours': 24 * default_blocking_days,
        'block_trx_method_ids': [self_method_id],
        "ineligible_message_for_old_application": message,
        "ineligible_popup": {
            "is_active": True,
            "title": "Kamu Belum Bisa Transaksi",
            "banner": {
                "is_active": True,
                "url": "https://statics.julo.co.id/loan/3_platform_validation/ineligible.png",
            },
            "content": message,
        },
        'exclude_app_id_last_digit': [],
    }

    FeatureSetting.objects.update_or_create(
        feature_name=FeatureNameConst.GTL_CROSS_PLATFORM,
        defaults={
            'parameters': params,
            'is_active': False,
            'category': 'loan',
            'description': "GTL Cross Platform settings",
        }
    )

class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(
            code=add_gtl_cross_platform_feature_setting,
            reverse_code=migrations.RunPython.noop,
        ),
    ]
