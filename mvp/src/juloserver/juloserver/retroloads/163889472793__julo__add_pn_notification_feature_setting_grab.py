# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2021-12-07 16:32
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import FeatureSetting
from juloserver.julo.constants import FeatureNameConst
from juloserver.julo.statuses import ApplicationStatusCodes, LoanStatusCodes


def add_pn_notification_settings_grab(apps, schema_editor):
    FeatureSetting.objects.get_or_create(
        is_active=True,
        feature_name=FeatureNameConst.GRAB_PUSH_NOTIFICATION,
        category="grab",
        parameters={
            "applications": [
                ApplicationStatusCodes.FORM_CREATED,
                ApplicationStatusCodes.FORM_PARTIAL_EXPIRED,
                ApplicationStatusCodes.APPLICATION_FLAGGED_FOR_FRAUD,
                ApplicationStatusCodes.APPLICATION_RESUBMISSION_REQUESTED,
                ApplicationStatusCodes.APPLICATION_DENIED,
                ApplicationStatusCodes.RESUBMISSION_REQUEST_ABANDONED,
                ApplicationStatusCodes.APPLICATION_CANCELED_BY_CUSTOMER
            ],
            "loans": [
                LoanStatusCodes.INACTIVE,
                LoanStatusCodes.CURRENT
            ]
        },
        description="Feature Setting for applications triggering loan statuses")


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(add_pn_notification_settings_grab, migrations.RunPython.noop)
    ]
