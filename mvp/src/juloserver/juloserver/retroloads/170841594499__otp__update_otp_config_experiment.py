# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-02-20 07:59
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.constants import MobileFeatureNameConst
from juloserver.julo.models import MobileFeatureSetting


def update_mobile_feature_setting_otp_experiment(apps, schema_editor):
    fs = MobileFeatureSetting.objects.get_or_none(feature_name=MobileFeatureNameConst.GLOBAL_OTP)
    if fs:
        for key in fs.parameters['transaction_settings'].keys():
            print(key)
            fs.parameters['transaction_settings'][key]['experiment'] = {
                'is_active': True,
                'last_digit_customer_id': ['0', '2', '4', '6', '8']
            }
        fs.save()


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(
            update_mobile_feature_setting_otp_experiment, migrations.RunPython.noop
        )
    ]
