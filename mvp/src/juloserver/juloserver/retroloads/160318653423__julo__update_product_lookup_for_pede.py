# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2020-10-20 09:35
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import ProductLookup
from django.db.models import F, Func, Value

def update_product_lookup_for_pede(apps, _schema_editor):
    product_lines = [101, 102]
    product_profiles = [26, 27]
    queryset = ProductLookup.objects.filter(product_line_id__in=product_lines)
    queryset.update(origination_fee_pct=0.07)
    queryset.update(
        product_name=Func(
            F('product_name'),
            Value('O.050'), Value('O.070'),
            function='replace',
        )
    )
    for i, product_line in enumerate(product_lines):
        ProductLookup.objects.create(
            product_name="I.840-O.070-L.050-C1.000-C2.000-M",
            interest_rate=0.84,
            origination_fee_pct=0.07,
            late_fee_pct=0.05,
            cashback_initial_pct=0,
            cashback_payment_pct=0.00,
            product_line_id=product_line,
            product_profile_id=product_profiles[i]
            )
        
        ProductLookup.objects.create(
            product_name="I.960-O.070-L.050-C1.000-C2.000-M",
            interest_rate=0.96,
            origination_fee_pct=0.07,
            late_fee_pct=0.05,
            cashback_initial_pct=0,
            cashback_payment_pct=0.00,
            product_line_id=product_line,
            product_profile_id=product_profiles[i]
            )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(update_product_lookup_for_pede, migrations.RunPython.noop),
    ]
    