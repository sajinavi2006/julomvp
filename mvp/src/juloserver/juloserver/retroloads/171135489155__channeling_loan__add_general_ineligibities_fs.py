# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-03-25 08:21
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.models import FeatureSetting
from juloserver.channeling_loan.constants import (
    FeatureNameConst as ChannelingFeatureNameConst,
    GeneralIneligible,
)

def add_general_ineligibilities_for_loan_channeling(app, schema_editor):
    params = {
        GeneralIneligible.ACCOUNT_STATUS_MORE_THAN_420_AT_SOME_POINT.name: True,
        GeneralIneligible.HAVENT_PAID_OFF_A_LOAN.name: True,
        GeneralIneligible.HAVENT_PAID_OFF_AN_INSTALLMENT.name: False,
    }

    FeatureSetting.objects.update_or_create(
        feature_name=ChannelingFeatureNameConst.CHANNELING_LOAN_EDITABLE_INELIGIBILITIES,
        defaults = {
            'is_active': True,
            'category': 'channeling_loan',
            'description': 'Editable ineligibilities for General Loan Channeling',
            'parameters': params,
        }
    )

class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(
            code=add_general_ineligibilities_for_loan_channeling,
            reverse_code=migrations.RunPython.noop,
        ),
    ]

