# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2021-02-04 04:22
from __future__ import unicode_literals

from django.conf import settings
from django.db import migrations

from juloserver.julo.models import MobileFeatureSetting
from juloserver.payment_point.constants import FeatureNameConst
from juloserver.payment_point.models import TransactionMethod

BUCKET_URL = settings.STATIC_ALICLOUD_BUCKET_URL + 'ppobv2/'

TRANSACTION_METHOD_DATA = [
    {
        'method_id': 1,
        'method_name': 'self',
        'display_name': 'Tarik Dana',
        'icon_url': BUCKET_URL + 'tarik_dana.png',
        'locked_icon_url': BUCKET_URL + 'tarik_dana_locked.png',
        'background_url': BUCKET_URL + 'tarik_dana.gif'
    }, {
        'method_id': 2,
        'method_name': 'other',
        'display_name': 'Kirim Dana',
        'icon_url': BUCKET_URL + 'kirim_dana.png',
        'locked_icon_url': BUCKET_URL + 'kirim_dana_locked.png',
        'background_url': BUCKET_URL + 'kirim_dana.gif'
    }, {
        'method_id': 3,
        'method_name': 'pulsa & paket data',
        'display_name': 'Pulsa & Data',
        'icon_url': BUCKET_URL + 'pulsa_data.png',
        'locked_icon_url': BUCKET_URL + 'pulsa_data_locked.png',
        'background_url': BUCKET_URL + 'pulsa_data.gif'
    }, {
        'method_id': 4,
        'method_name': 'pasca bayar',
        'display_name': 'Kartu Pascabayar',
        'icon_url': BUCKET_URL + 'pascabayar.png',
        'locked_icon_url': BUCKET_URL + 'pascabayar_locked.png',
        'background_url': BUCKET_URL + 'pascabayar.gif'
    }, {
        'method_id': 5,
        'method_name': 'dompet digital',
        'display_name': 'Dompet Digital',
        'icon_url': BUCKET_URL + 'ewallet.png',
        'locked_icon_url': BUCKET_URL + 'ewallet_locked.png',
        'background_url': BUCKET_URL + 'ewallet.gif'
    }, {
        'method_id': 6,
        'method_name': 'listrik pln',
        'display_name': 'listrik PLN',
        'icon_url': BUCKET_URL + 'listrik_pln.png',
        'locked_icon_url': BUCKET_URL + 'listrik_pln_locked.png',
        'background_url': BUCKET_URL + 'listrik_pln.gif'
    }, {
        'method_id': 7,
        'method_name': 'bpjs kesehatan',
        'display_name': 'BPJS Kesehatan',
        'icon_url': BUCKET_URL + 'bpjs_kesehatan.png',
        'locked_icon_url': BUCKET_URL + 'bpjs_kesehatan_locked.png',
        'background_url': BUCKET_URL + 'bpjs_kesehatan.gif'
    }
]


def data_seed_for_transaction_method(app, schema_editor):
    for transaction_method in TRANSACTION_METHOD_DATA:
        TransactionMethod.objects.get_or_create(
            id=transaction_method['method_id'],
            method=transaction_method['method_name'],
            fe_display_name=transaction_method['display_name'],
            background_icon_url=transaction_method['background_url'],
            foreground_icon_url=transaction_method['icon_url'],
            foreground_locked_icon_url=transaction_method['locked_icon_url']
        )

parameter = {
    1: {'is_active': False, 'limit_threshold': 0},
    2: {'is_active': False, 'limit_threshold': 0},
    3: {'is_active': False, 'limit_threshold': 0},
    4: {'is_active': False, 'limit_threshold': 0},
    5: {'is_active': False, 'limit_threshold': 0},
    6: {'is_active': False, 'limit_threshold': 0},
    7: {'is_active': False, 'limit_threshold': 0}
}


def feature_settings_for_transaction_method_highlight(app, schema_editor):
    MobileFeatureSetting.objects.get_or_create(
        is_active=True,
        feature_name=FeatureNameConst.TRANSACTION_METHOD_HIGHLIGHT,
        parameters=parameter,
    )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(data_seed_for_transaction_method, migrations.RunPython.noop),
        migrations.RunPython(feature_settings_for_transaction_method_highlight, migrations.RunPython.noop)
    ]
