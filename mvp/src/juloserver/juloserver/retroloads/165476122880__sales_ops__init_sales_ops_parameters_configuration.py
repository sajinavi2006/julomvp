# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2022-06-09 07:53
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.models import FeatureSetting
from juloserver.sales_ops.constants import ScoreCriteria


def update_sales_ops_feature_setting(apps, schema_editor):
    sales_ops_feature = FeatureSetting.objects.get_or_none(
        feature_name="sales_ops",
    )
    parameters = sales_ops_feature.parameters
    parameters["buckets"] = [
        {
            "code": "sales_ops_a",
            "name": "SALES OPS A",
            "criteria": ScoreCriteria.RECENCY,
            "scores": [2, 3],
            "description": "Sales Ops A: R-score 2 and 3",
            "is_active": True,
        },
        {
            "code": "sales_ops_b",
            "name": "SALES OPS B",
            "criteria": ScoreCriteria.RECENCY,
            "scores": [1, 4, 5],
            "description": "Sales Ops B: R-score 1,4, and 5",
            "is_active": True,
        }
    ]
    sales_ops_feature.update_safely(parameters=parameters)


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(update_sales_ops_feature_setting)
    ]
