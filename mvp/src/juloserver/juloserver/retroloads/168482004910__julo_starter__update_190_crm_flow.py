# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-05-23 05:34
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.models import ChangeReason, StatusLookup
from juloserver.julo_starter.constants import JuloStarter190RejectReason


def run(apps, schema_editor):
    status = StatusLookup.objects.filter(status_code=190).last()
    reason = JuloStarter190RejectReason.REJECT_DV

    ch_reason = ChangeReason.objects.filter(
        reason=reason,
        status=status
    ).last()
    if ch_reason:
        ch_reason.delete()

    status = StatusLookup.objects.filter(status_code=190).last()
    reason = JuloStarter190RejectReason.REJECT_FRAUD

    ch_reason = ChangeReason.objects.filter(
        reason=reason,
        status=status
    ).last()
    if ch_reason:
        ch_reason.delete()

    status = StatusLookup.objects.filter(status_code=190).last()
    reason = 'Credit limit activated'

    ch_reason = ChangeReason.objects.filter(
        reason=reason,
        status=status
    ).last()
    if ch_reason:
        ch_reason.delete()


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(run, migrations.RunPython.noop),
    ]
