# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-12-23 07:53
from __future__ import unicode_literals

from django.db import migrations

from juloserver.account_payment.models import CRMCustomerDetail


def update_can_get_refinancing_crm_detail(apps, _schema_editor):
    existing_crm_detail = CRMCustomerDetail.objects.filter(
        attribute_name='Memenuhi Syarat Refinancing'
    )
    parameter_data = {
        "dom": {
            "-": "<strong> - </strong>",
            "true": "<strong> Ya </strong>",
            "false": "<strong> Tidak </strong>",
        },
        "models": {"account": "model.id", "accountpayment": "model.account.id"},
        "function": "function_name(model_identifier)[0]",
        "default_value": "-",
        "function_name": "can_account_get_refinancing_centralized",
        "function_path": "juloserver.waiver.services.account_related",
        "execution_mode": "execute_function",
    }

    if existing_crm_detail.exists():
        existing_crm_detail.update(parameter_model_value=parameter_data)


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(update_can_get_refinancing_crm_detail, migrations.RunPython.noop),
    ]
