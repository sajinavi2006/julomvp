# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2022-11-28 03:18
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import (Workflow, ProductLine)


def add_workflow_and_product_line_julostarter(apps, schema_editor):
    """
    Add new Workflow and Product Line for JuloStarter.
    """

    name = "JuloStarter"
    desc = "this is a workflow for JuloStarter"
    handler = "JuloStarterWorkflowHandler"

    workflow = Workflow.objects.create(name=name,
                                       desc=desc,
                                       is_active=True,
                                       handler=handler)

    # create new data product line code
    line_code = 2
    product_line = ProductLine.objects.get_or_none(product_line_code=line_code)
    if not product_line:
        ProductLine.objects.create(product_line_code=line_code,
                                   product_line_type="Starter",
                                   min_amount=500000,
                                   max_amount=1000000,
                                   min_duration=1,
                                   max_duration=3,
                                   min_interest_rate=0,
                                   max_interest_rate=0,
                                   payment_frequency="Monthly",
                                   amount_increment=100000,
                                   default_workflow=workflow)


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(add_workflow_and_product_line_julostarter, migrations.RunPython.noop)
    ]
