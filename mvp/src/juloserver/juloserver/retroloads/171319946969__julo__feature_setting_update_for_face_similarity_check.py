# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-03-13 07:53
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import FeatureSetting
from juloserver.face_recognition.constants import FaceMatchingCheckConst
from juloserver.julo.constants import FeatureNameConst


def update_feature_setting_face_matching_check(apps, schema_editor):
    fs = FeatureSetting.objects.filter(
        feature_name=FeatureNameConst.FACE_MATCHING_CHECK,
    ).last()
    if not fs:
        return

    fs.parameters = {
        FaceMatchingCheckConst.FeatureSetting.parameter_selfie_x_ktp: {
            "is_active": True,
            "logical_operator": ">=",
            "similarity_threshold": 99.0,
        },
        FaceMatchingCheckConst.FeatureSetting.parameter_selfie_x_liveness: {
            "is_active": True,
            "logical_operator": ">=",
            "similarity_threshold": 99.0,
        },
    }

    fs.save(update_fields=['parameters'])


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(update_feature_setting_face_matching_check, migrations.RunPython.noop)
    ]
