# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2022-06-27 06:31
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import FeatureSetting
from juloserver.julo.constants import FeatureNameConst

from juloserver.disbursement.constants import (
    DisbursementVendors,
    DisbursementVendorStatus,
)


def add_feature_setting_to_ecommerce_experiment(apps, schema_editor):
    FeatureSetting.objects.update_or_create(
        feature_name=FeatureNameConst.ECOMMERCE_EXPERIMENT,
        parameters={
            DisbursementVendors.XFERS: {
                "status": DisbursementVendorStatus.ACTIVE,
                "loan_id": "#nth:-1:1,3,5,7,9"
            },
            DisbursementVendors.XENDIT: {
                "status": DisbursementVendorStatus.ACTIVE,
                "loan_id": "#nth:-1:0,2,4,6,8"
            }
        },
        is_active=True,
        category='disbursement',
        description='ecommerce experiment',
    )


class Migration(migrations.Migration):
    dependencies = [
    ]

    operations = [
        migrations.RunPython(
            add_feature_setting_to_ecommerce_experiment, migrations.RunPython.noop),
    ]
