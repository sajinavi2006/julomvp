# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2018-02-02 08:47
from __future__ import unicode_literals

from builtins import range
import random
import string


from django.db import migrations
from django.contrib.auth.hashers import make_password
from django.contrib.auth.models import User, Group
from juloserver.api_token.models import ExpiryToken as Token
from juloserver.paylater.constants import PaylaterConst


def create_bukalapak_user(apps, schema_editor):
    group = Group.objects.get(name="julo_partners")
    username = 'bl_paylater'
    hash_password = make_password(
        ''.join([random.choice(string.hexdigits) for _ in range(12)])
    )
    #edit with real data by django admin
    if not User.objects.filter(username=username).exists():
        user = User.objects.create(
            username=username, email="cs@bukalapak.com",
            first_name="bukalapak", last_name="paylater",
            password=hash_password, is_active=True)
        user.save()
        user.groups.add(group)

    Token.objects.get_or_create(user=user)


class Migration(migrations.Migration):
    initial = True

    dependencies = [
    ]
