# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-08-09 03:17
from __future__ import unicode_literals

from django.db import migrations

from juloserver.merchant_financing.constants import MFStandardRole
from juloserver.merchant_financing.scripts.create_user_mf_web_app import create_mf_user_agent_role
from juloserver.portal.object.bulk_upload.constants import MerchantFinancingCSVUploadPartner
from django.conf import settings
import logging

logger = logging.getLogger(__name__)


def create_new_admin_user_efishery(apps, schema_editor):
    # doesnt return anything because both of this username already registered on crm production
    if settings.ENVIRONMENT != 'prod':
        return
    result1 = create_mf_user_agent_role(
        partner_name=MerchantFinancingCSVUploadPartner.EFISHERY,
        email='heriyanto@julofinance.com',
        username='heriyanto.efishery',
        partner_user_role=MFStandardRole.PARTNER_AGENT,
    )
    if result1 and not result1.get('success_result'):
        logger.info(
            {
                'action': 'create_new_admin_user_efishery',
                'action_type': 'retroload',
                'result': result1,
            }
        )
    result2 = create_mf_user_agent_role(
        email='dinna.putri@julofinance.com',
        username='Dinna.Adilia',
        partner_user_role=MFStandardRole.AGENT,
    )
    if result2 and not result2.get('success_result'):
        logger.info(
            {
                'action': 'create_new_admin_user_efishery',
                'action_type': 'retroload',
                'result': result2,
            }
        )


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(create_new_admin_user_efishery, migrations.RunPython.noop),
    ]
