# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2021-10-18 04:22
from __future__ import unicode_literals

from django.db import migrations
from django.conf import settings
from juloserver.julo.models import Partner
from juloserver.portal.object.bulk_upload.constants import (MerchantFinancingCSVUploadPartner,
                                                            MerchantFinancingCSVUploadPartnerDueDateType)
from juloserver.disbursement.models import NameBankValidation


def add_partners_bank_account_and_other_details(apps, schema_editor):
    # select  efishery account number from name bank validation
    validation = NameBankValidation.objects.filter(account_number='2021313108').last()
    if validation:
        Partner.objects.filter(
            name=MerchantFinancingCSVUploadPartner.EFISHERY
        ).update(partner_bank_account_number=validation.account_number,
                 partner_bank_name='BANK NEGARA INDONESIA (PERSERO), Tbk (BNI)',
                 partner_bank_account_name=validation.name_in_bank,
                 due_date_type=MerchantFinancingCSVUploadPartnerDueDateType.END_OF_TENOR,
                 name_bank_validation=validation
                 )
    # select  dagangan account number from name bank validation
    validation = NameBankValidation.objects.filter(account_number='0353354555').last()
    if validation:
        Partner.objects.filter(
            name=MerchantFinancingCSVUploadPartner.DAGANGAN
        ).update(partner_bank_account_number=validation.account_number,
                 partner_bank_name='BANK CENTRAL ASIA, Tbk (BCA)',
                 partner_bank_account_name=validation.name_in_bank,
                 due_date_type=MerchantFinancingCSVUploadPartnerDueDateType.END_OF_TENOR,
                 name_bank_validation=validation
                 )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(add_partners_bank_account_and_other_details, migrations.RunPython.noop),
    ]
