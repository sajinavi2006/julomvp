# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-11-27 06:35
# -*- coding: utf-8 -*-
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.constants import FeatureNameConst


def add_or_update_payment_gateway_alert_feature_setting(apps, schema_editor):
    featuresetting = apps.get_model("julo", "FeatureSetting")
    parameters = {
        "slack_alert_staging": True,
        "slack_alert_uat": True,
        "slack_alert_prod": True,
        "min_balance_ayoconnect": 1000000000
    }

    description = "feature setting to toggle payment gateway alert"
    payment_gateway_alert_feature_setting = featuresetting.objects.update_or_create(
        feature_name=FeatureNameConst.PAYMENT_GATEWAY_ALERT
    )

    payment_gateway_alert_feature_setting = payment_gateway_alert_feature_setting[0]
    payment_gateway_alert_feature_setting.parameters = parameters
    payment_gateway_alert_feature_setting.is_active = True
    payment_gateway_alert_feature_setting.category = "payment_gateway"
    payment_gateway_alert_feature_setting.description = description
    payment_gateway_alert_feature_setting.save()


class Migration(migrations.Migration):
    dependencies = [
    ]

    operations = [
        migrations.RunPython(
            add_or_update_payment_gateway_alert_feature_setting,
            migrations.RunPython.noop
        )
    ]
