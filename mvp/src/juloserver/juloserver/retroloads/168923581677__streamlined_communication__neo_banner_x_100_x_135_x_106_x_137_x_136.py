# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-07-13 08:10
from __future__ import unicode_literals

from django.db import migrations

from juloserver.streamlined_communication.models import NeoBannerCard
from juloserver.julo.models import Image


class ImageNames(object):
    BANNER_100 = 'neo-banner/JULO-System_Icon_24-02.jpg'
    BANNER_105_C_SCORE = 'neo-banner/JULO-System_Icon_24-05.jpg'
    BANNER_106 = 'neo-banner/JULO-System_Icon_24-02.jpg'
    BANNER_135_REAPPLY = 'neo-banner/JULO-System_Icon_24-06.jpg'


def create_image(image_source_id, image_type, image_url):
    image = Image()
    image.image_source = image_source_id
    image.image_type = image_type
    image.url = image_url
    image.save()


def retroload_neobanner_j1(_apps, _schema_editor):
    data_to_be_loaded = [
        {
            'statuses': '[100]',
            'product': 'J1',
            'template_card': 'B_BUTTON',
            'top_image': ImageNames.BANNER_100,
            'top_title': 'Selesaikan Isi Formulirnya, Yuk!',
            'top_message': 'Ayo, jangan buang kesempatanmu untuk dapat limit hingga Rp15.000.000!',
            'button_text': 'Lanjutkan Isi Formulir',
            'button_action': 'appl_main',
            'extended_image': None,
            'extended_title': None,
            'extended_message': None,
            'extended_button_text': None,
            'extended_button_action': None,
        },
        {
            'statuses': '[105_C_SCORE, 133, 135_CANNOT_REAPPLY]',
            'product': 'J1',
            'template_card': 'B_FAILED',
            'top_image': ImageNames.BANNER_105_C_SCORE,
            'top_title': 'Maaf Ya, Permohonanmu Gagal',
            'top_message': 'Saat ini kamu belum memenuhi kriteria dari analisa tim JULO.',
            'button_text': 'Akunmu gagal diverifikasi',
            'button_action': None,
            'extended_image': None,
            'extended_title': None,
            'extended_message': None,
            'extended_button_text': None,
            'extended_button_action': None,
        },
        {
            'statuses': '[106, 136]',
            'product': 'J1',
            'template_card': 'B_BUTTON',
            'top_image': ImageNames.BANNER_106,
            'top_title': 'Yah, Formulir Kamu Kedaluawarsa!',
            'top_message': 'Isi ulang lagi formulirnya dan dapatkan limit hingga Rp15.000.000 setelah pengajuan diterima!',
            'button_text': 'Isi Ulang Formulir',
            'button_action': 'expired_form',
            'extended_image': None,
            'extended_title': None,
            'extended_message': None,
            'extended_button_text': None,
            'extended_button_action': None,
        },
        {
            'statuses': '[135_REAPPLY, 137]',
            'product': 'J1',
            'template_card': 'B_BUTTON',
            'top_image': ImageNames.BANNER_135_REAPPLY,
            'top_title': 'Yuk, Lakukan Pengajuan Lagi!',
            'top_message': 'Lengkapi formulir dan dapatkan limit hingga Rp15.000.000 jika pengajuanmu diterima!',
            'button_text': 'Ajukan Sekarang',
            'button_action': 'reapply_form',
            'extended_image': None,
            'extended_title': None,
            'extended_message': None,
            'extended_button_text': None,
            'extended_button_action': None,
        },
    ]

    for data in data_to_be_loaded:
        neo_banner_card = NeoBannerCard.objects.create(**data)

        if data['top_image']:
            create_image(neo_banner_card.id, 'NEO_BANNER_TOP_BACKGROUND_IMAGE', data['top_image'])

    # Change status name for 105
    neo_banner_card = NeoBannerCard.objects.get(statuses='[105]')
    neo_banner_card.statuses = '[105_NOT_C_SCORE]'
    neo_banner_card.save()


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(retroload_neobanner_j1, migrations.RunPython.noop)
    ]
