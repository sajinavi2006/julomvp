# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2024-11-19 03:30
from __future__ import unicode_literals

from django.db import migrations

from juloserver.streamlined_communication.models import StreamlinedMessage


def replace_oss_from_streamlined_message(apps, schema_editor):
    data = StreamlinedMessage.objects.filter(
        message_content__icontains='oss-ap-southeast-5.aliyuncs.com'
    )
    for item in data:
        new_message = item.message_content.replace('oss-ap-southeast-5.aliyuncs.com', 'julo.co.id')
        item.message_content = new_message
        item.save()


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(replace_oss_from_streamlined_message, migrations.RunPython.noop)
    ]
