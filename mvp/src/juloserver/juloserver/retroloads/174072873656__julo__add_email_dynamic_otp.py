# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2025-02-28 07:45
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.constants import MobileFeatureNameConst
from juloserver.julo.models import MobileFeatureSetting


def add_dynamic_email_feature_settings(apps, _schema_editor):
    dynamic_otp_settings = MobileFeatureSetting.objects.filter(
        feature_name=MobileFeatureNameConst.DYNAMIC_OTP_PAGE
    ).first()

    if dynamic_otp_settings:
        parameters = dynamic_otp_settings.parameters
        parameters["email"] = {
            "title": "OTP Dikirim Lewat Email",
            "image_url": "https://statics.julo.co.id/juloserver/staging/static/images/otp/otp_email.png",
            "page_title": "Verifikasi OTP",
            "description": "Masukkan kode OTP yang telah kami kirim ke email {email} untuk lanjutkan proses.",
            "fraud_message": "Segera laporkan lewat email ke cs@julo.co.id jika ada yang meminta kode OTP selain di aplikasi ini.",
            "destination_uri": "",
            "countdown_end_time": 60,
            "input_field_length": 6,
            "confirm_button_text": "",
            "countdown_start_time": 60,
            "btn_another_method_text": "Kirim Ulang Kode OTP",
            "method_not_available_text": "Tidak menerima OTP?",
        }

        dynamic_otp_settings.parameters = parameters
        dynamic_otp_settings.save()


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(add_dynamic_email_feature_settings, migrations.RunPython.noop),
    ]
