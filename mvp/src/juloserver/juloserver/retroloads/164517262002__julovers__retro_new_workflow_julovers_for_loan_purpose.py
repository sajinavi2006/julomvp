# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2022-02-18 08:23
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.models import ProductLine, ProductLineLoanPurpose, LoanPurpose


def map_julovers_loan_purpose_with_product_line(apps, _schema_editor):
    julovers_product_line = ProductLine.objects.get(product_line_code=200)
    loan_purpose_ids = LoanPurpose.objects.values_list('id', flat=True)
    product_line_loan_purposes = []
    for loan_purpose_id in loan_purpose_ids:
        product_line_loan_purposes.append(ProductLineLoanPurpose(
            product_line_id=julovers_product_line.product_line_code,
            loan_purpose_id=loan_purpose_id
        ))
    ProductLineLoanPurpose.objects.bulk_create(product_line_loan_purposes)


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(
            map_julovers_loan_purpose_with_product_line, migrations.RunPython.noop),
    ]
