# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-06-19 07:16
from __future__ import unicode_literals

from django.db import migrations

from juloserver.moengage.constants import UNSENT_MOENGAGE
from juloserver.streamlined_communication.models import StreamlinedCommunication


def update_j1_pn_payment_reminder_product_property(apps, schema_editor):
    eligible_template_codes = ['j1_pn_T-4_backup', 'j1_pn_T-10_backup',
                               'j1_pn_autodebet_T-3_backup', 'j1_pn_T-5_backup',
                               'j1_pn_autodebet_T-1_backup', 'j1_pn_autodebet_T-2_backup',
                               'j1_pn_T-3_backup', 'j1_pn_T0_backup',
                               'j1_pn_autodebet_fail_T0_first_try_backup', 'j1_pn_T-2_backup',
                               'j1_pn_T-1_backup', 'j1_pn_T6_backup', 'j1_pn_T7_backup',
                               'j1_pn_T8_backup', 'j1_pn_T9_backup', 'j1_pn_T10_backup',
                               'j1_pn_T11_backup', 'j1_pn_T13_backup', 'j1_pn_T15_backup',
                               'j1_pn_T1_backup', 'j1_pn_T2_backup', 'j1_pn_T3_backup',
                               'j1_pn_T4_backup', 'j1_pn_T5_backup', 'j1_pn_autodebet_T-5_backup',
                               'j1_pn_autodebet_T-4_backup', 'j1_pn_T12_backup', 'j1_pn_T14_backup',
                               'j1_pn_T21_backup', 'j1_pn_T30_backup', 'j1_pn_T60_backup']
    for template_code in eligible_template_codes:
        streamlined_communication = StreamlinedCommunication.objects.get_or_none(
            communication_platform='PN',
            type='Payment Reminder',
            extra_conditions=UNSENT_MOENGAGE,
            template_code=template_code
        )

        if streamlined_communication:
            streamlined_communication.update_safely(product='j1')


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(update_j1_pn_payment_reminder_product_property,
            migrations.RunPython.noop)
    ]
