# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2022-06-15 09:10
from __future__ import unicode_literals

from django.db import migrations

from juloserver.moengage.constants import UNSENT_MOENGAGE
from juloserver.streamlined_communication.constant import CommunicationPlatform
from juloserver.streamlined_communication.models import (
    StreamlinedCommunication,
    StreamlinedMessage,
)


def add_pn_and_backups(apps, schema_editor):
    heart_eyes = u'\U0001F60D'
    wink = u'\U0001F609'
    moneybag = u'\U0001F4B0'
    speech_ballon = u'\U0001F4AC'
    money_wing = u'\U0001F4B8'
    warning = u'\U000026A0'
    astonished_face = '\U0001F632'

    # Insert PN in streamlined_communication for autodebet for dpd -1, -2, -3, -4, -5
    for dpd in (-1, -2, -3, -4, -5):
        message = StreamlinedMessage.objects.create(
            message_content='Pastikan Saldo Rekeningmu Cukup Ya! ' + wink,
            parameter='{}'
        )
        StreamlinedCommunication.objects.create(
            dpd=dpd,
            subject='Wah! Cashback 1% Pakai BCA Auto Debit ' + heart_eyes,
            communication_platform=CommunicationPlatform.PN,
            template_code='j1_pn_autodebet_T{}_backup'.format(dpd),
            moengage_template_code='j1_pn_autodebet_T{}'.format(dpd),
            is_active=True,
            type='Payment Reminder',
            time_sent='18:0',
            message=message,
            extra_conditions=UNSENT_MOENGAGE
        )

    # Insert PN in streamlined_communication for autodebet for dpd 0
    message = StreamlinedMessage.objects.create(
        message_content='Lakukan pembayaran dengan metode lain dan tetap raih cashbacknya!',
        parameter='{}'
    )
    StreamlinedCommunication.objects.create(
        dpd=0,
        subject='Pembayaran Melalui Autodebet Gagal ' + astonished_face,
        communication_platform=CommunicationPlatform.PN,
        template_code='j1_pn_autodebet_fail_T0_first_try_backup',
        moengage_template_code='j1_pn_autodebet_fail_T0_first_try',
        is_active=True,
        type='Payment Reminder',
        time_sent='18:0',
        message=message,
        extra_conditions=UNSENT_MOENGAGE
    )

    # Insert PN in streamlined_communication for dpd 0, -1, -2
    for dpd in (0, -1, -2):
        message = StreamlinedMessage.objects.create(
            message_content='Bayar {{due_amount}} sekarang!',
            parameter='{due_amount}'
        )
        StreamlinedCommunication.objects.create(
            dpd=dpd,
            subject='Cashback menunggu Anda' + moneybag,
            communication_platform=CommunicationPlatform.PN,
            template_code='j1_pn_T{}_backup'.format(dpd),
            moengage_template_code='j1_pn_T{}'.format(dpd),
            is_active=True,
            type='Payment Reminder',
            time_sent='18:0',
            message=message,
            extra_conditions=UNSENT_MOENGAGE
        )

    # Insert PN in streamlined_communication for dpd -3, -4, 5
    for dpd in (-3, -4, -5):
        message = StreamlinedMessage.objects.create(
            message_content='Kesempatan mendapatkan kejutan JULO!',
            parameter='{}'
        )
        StreamlinedCommunication.objects.create(
            dpd=dpd,
            subject='Bayar Lebih Awal, Bawa Pulang Jutaan Rupiah!' + money_wing + money_wing,
            communication_platform=CommunicationPlatform.PN,
            template_code='j1_pn_T{}_backup'.format(dpd),
            moengage_template_code='j1_pn_T{}'.format(dpd),
            is_active=True,
            type='Payment Reminder',
            time_sent='18:0',
            message=message,
            extra_conditions=UNSENT_MOENGAGE
        )

    # Insert PN in streamlined_communication for dpd -10
    message = StreamlinedMessage.objects.create(
        message_content='Tahukah kamu membayar lebih awal meningkatkan skor kreditmu?',
        parameter='{}'
    )
    StreamlinedCommunication.objects.create(
        dpd=-10,
        subject='Lesatkan Skor Kreditmu!',
        communication_platform=CommunicationPlatform.PN,
        template_code='j1_pn_T-10_backup',
        moengage_template_code='j1_pn_T-10',
        is_active=True,
        type='Payment Reminder',
        time_sent='18:0',
        message=message,
        extra_conditions=UNSENT_MOENGAGE
    )

    # Insert PN in streamlined_communication for dpd 1, 2, 3, 4, 5
    for dpd in (1, 2, 3, 4, 5):
        message = StreamlinedMessage.objects.create(
            message_content='Bayar tagihan Anda sekarang dan hindari denda',
            parameter='{}'
        )
        StreamlinedCommunication.objects.create(
            dpd=dpd,
            subject='Hindari Denda Keterlambatan!',
            communication_platform=CommunicationPlatform.PN,
            template_code='j1_pn_T{}_backup'.format(dpd),
            moengage_template_code='j1_pn_T{}'.format(dpd),
            is_active=True,
            type='Payment Reminder',
            time_sent='18:0',
            message=message,
            extra_conditions=UNSENT_MOENGAGE
        )

    # Insert PN in streamlined_communication for dpd 6, 7, 8, 9, 10
    for dpd in (6, 7, 8, 9, 10):
        message = StreamlinedMessage.objects.create(
            message_content='Hubungi tim JULO untuk temukan solusi dari kendala pembayaran Anda' + speech_ballon,
            parameter='{}'
        )
        StreamlinedCommunication.objects.create(
            dpd=dpd,
            subject='Jangan Biarkan Denda Anda Terus Bertambah',
            communication_platform=CommunicationPlatform.PN,
            template_code='j1_pn_T{}_backup'.format(dpd),
            moengage_template_code='j1_pn_T{}'.format(dpd),
            is_active=True,
            type='Payment Reminder',
            time_sent='18:0',
            message=message,
            extra_conditions=UNSENT_MOENGAGE
        )

    # Insert PN in streamlined_communication for dpd 11, 13, 15
    for dpd in (11, 13, 15):
        message = StreamlinedMessage.objects.create(
            message_content='Jangan tambah beban Anda dan segera lakukan pembayaran tagihan.',
            parameter='{}'
        )
        StreamlinedCommunication.objects.create(
            dpd=dpd,
            subject='Jaga Kesempatan Melakukan Pinjaman Anda ' + warning,
            communication_platform=CommunicationPlatform.PN,
            template_code='j1_pn_T{}_backup'.format(dpd),
            moengage_template_code='j1_pn_T{}'.format(dpd),
            is_active=True,
            type='Payment Reminder',
            time_sent='18:0',
            message=message,
            extra_conditions=UNSENT_MOENGAGE
        )

    # Insert PN in streamlined_communication for dpd 12, 14
    for dpd in (12, 14):
        message = StreamlinedMessage.objects.create(
            message_content='Hubungi tim Julo untuk temukan solusi dari kendala pembayaran Anda ' + speech_ballon,
            parameter='{}'
        )
        StreamlinedCommunication.objects.create(
            dpd=dpd,
            subject='Jangan Biarkan Beban Anda Terus Bertambah ' + warning,
            communication_platform=CommunicationPlatform.PN,
            template_code='j1_pn_T{}_backup'.format(dpd),
            moengage_template_code='j1_pn_T{}'.format(dpd),
            is_active=True,
            type='Payment Reminder',
            time_sent='18:0',
            message=message,
            extra_conditions=UNSENT_MOENGAGE
        )

    # Insert PN in streamlined_communication for dpd 21, 30, 60
    for dpd in (21, 30, 60):
        message = StreamlinedMessage.objects.create(
            message_content='Segera hubungi tim JULO u/ menemukan solusi terbaik ' + speech_ballon,
            parameter='{}'
        )
        StreamlinedCommunication.objects.create(
            dpd=dpd,
            subject='Beban Anda Terus Bertambah ' + warning,
            communication_platform=CommunicationPlatform.PN,
            template_code='j1_pn_T{}_backup'.format(dpd),
            moengage_template_code='j1_pn_T{}'.format(dpd),
            is_active=True,
            type='Payment Reminder',
            time_sent='18:0',
            message=message,
            extra_conditions=UNSENT_MOENGAGE
        )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(add_pn_and_backups, migrations.RunPython.noop),
    ]
