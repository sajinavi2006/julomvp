# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2025-02-13 04:54
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.models import FeatureSetting, Partner
from juloserver.julo.partners import PartnerConstant
from juloserver.minisquad.constants import FeatureNameConst


def create_feature_setting_for_b6_partner_exclusion(apps, schema_editor):
    partner_ids = list(
        Partner.objects.filter(
            name__in=[PartnerConstant.GOSEL, PartnerConstant.GRAB_PARTNER, PartnerConstant.DANA]
        ).values_list('id', flat=True)
    )
    FeatureSetting.objects.create(
        feature_name=FeatureNameConst.RECOVERY_BUCKET_EXCLUSION_PARTNER,
        is_active=True,
        description='This configuration is for determine list of partner will excluded from B6',
        category='collection',
        parameters={'partner_list_ids': partner_ids},
    )


class Migration(migrations.Migration):

    dependencies = []

    operations = [
        migrations.RunPython(
            create_feature_setting_for_b6_partner_exclusion, migrations.RunPython.noop
        )
    ]
