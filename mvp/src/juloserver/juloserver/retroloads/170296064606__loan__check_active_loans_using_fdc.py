# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-12-19 04:37
from __future__ import unicode_literals

from django.conf import settings
from django.db import migrations

from juloserver.julo.constants import FeatureNameConst
from juloserver.julo.models import FeatureSetting


def add_feature_setting_to_check_other_active_platforms_using_fdc(apps, schema_editor):
    base_banner_path = "{}loan/3_platform_validation".format(
        settings.STATIC_ALICLOUD_BUCKET_URL
    )

    FeatureSetting.objects.update_or_create(
        feature_name=FeatureNameConst.CHECK_OTHER_ACTIVE_PLATFORMS_USING_FDC,
        parameters={
            "fdc_data_outdated_threshold_days": 7,
            "number_of_allowed_platforms": 3,
            "whitelist": {
                "is_active": False,
                "list_application_id": [],
            },
            "bypass": {
                "is_active": False,
                "list_application_id": [],
            },
            "ineligible_message_for_old_application": "Menurut aturan terbaru OJK, kamu tidak dapat memiliki pinjaman aktif di lebih dari 3 aplikasi berbeda. Lunasi salah satu pinjamanmu dulu untuk transaksi di JULO, ya!<br>"
                                                      "<br>"
                                                      "Jika pinjamanmu sudah lunas, klik Perbarui untuk cek data terbaru kamu. Kamu juga bisa tunggu 1x24 jam untuk coba lagi atau hubungi CS JULO.",
            "popup": {
                "eligible": {
                    "is_active": True,
                    "title": "Perhatikan Aturan Terbaru OJK, Ya!",
                    "banner": {
                        "is_active": True,
                        "url": "{}/eligible.png".format(base_banner_path),
                    },
                    "content": "Menurut aturan terbaru OJK, tiap pengguna hanya dapat memiliki pinjaman aktif di maks. 3 aplikasi yang berbeda.<br>"
                               "<br>"
                               "Jadikan JULO sebagai aplikasi pinjaman pilihanmu, ya!",
                    "additional_information": {
                        "is_active": True,
                        "content": "Untuk informasi lebih lanjut, kamu bisa klik di sini",
                        "clickable_text": "di sini",
                        "link": "https://www.julo.co.id/faq",
                    }
                },
                "ineligible": {
                    "is_active": True,
                    "title": "Kamu Belum Bisa Transaksi",
                    "banner": {
                        "is_active": True,
                        "url": "{}/ineligible.png".format(base_banner_path),
                    },
                    "content": "Sesuai aturan OJK, kamu perlu lunasi pinjaman hingga tersisa 2 pinjaman aktif dari aplikasi lain untuk transaksi di JULO.<br>"
                               "<br>"
                               "Jika pinjamanmu sudah lunas, klik <b>Perbarui</b> untuk cek data terbaru kamu. Kamu juga bisa tunggu 1x24 jam untuk coba lagi atau hubungi CS JULO.",
                    "additional_information": {
                        "is_active": True,
                        "content": "Untuk informasi lebih lanjut, kamu bisa klik di sini",
                        "clickable_text": "di sini",
                        "link": "https://www.julo.co.id/faq",
                    }
                },
            },
            "ineligible_alert_after_fdc_checking": {
                "is_active": True,
                "title": "Kamu Belum Bisa Transaksi",
                "content": "Kamu terdeteksi memiliki pinjaman aktif di 3 aplikasi lain. Lunasi salah satu pinjaman dulu, ya. Kamu juga bisa baca info lebih lanjut di sini.",
                "clickable_text": "di sini",
                "link": "https://www.julo.co.id/faq"
            },
        },
        is_active=False,
        category="loan",
        description="Check number of other active platforms using FDC",
    )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(
            add_feature_setting_to_check_other_active_platforms_using_fdc, migrations.RunPython.noop
        ),
    ]
