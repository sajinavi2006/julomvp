# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2023-05-18 10:36
from __future__ import unicode_literals

from django.db import migrations

from juloserver.early_limit_release.constants import ExperimentOption
from juloserver.early_limit_release.models import EarlyReleaseExperiment


def add_early_limit_release_data(apps, schema_editor):
    experiments_data = [{
        'experiment_name': 'Experiment test group 1',
        'option': ExperimentOption.OPTION_1,
        'description': 'Test group 1 with option 1',
        'criteria': {
            'last_cust_digit': {
                'from': '00',
                'to': '19'
            },
            'loan_duration_payment_rules': {
                '5': 3, '6': 3, '9': 2
            },
        },
        'is_active': True,
        'is_delete': False
    }, {
        'experiment_name': 'Experiment test group 2',
        'option': ExperimentOption.OPTION_2,
        'description': 'Test group 2 with option 2',
        'criteria': {
            'last_cust_digit': {
                'from': '20',
                'to': '89'
            },
            'loan_duration_payment_rules': {
                '5': 3, '6': 3, '9': 2
            },
        },
        'is_active': True,
        'is_delete': False
    }]

    experiments = []
    for data in experiments_data:
        experiments.append(EarlyReleaseExperiment(**data))
    EarlyReleaseExperiment.objects.bulk_create(experiments)


class Migration(migrations.Migration):
    dependencies = [
    ]

    operations = [
        migrations.RunPython(add_early_limit_release_data, migrations.RunPython.noop),
    ]
