# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2021-05-31 03:47
from __future__ import unicode_literals

from django.db import migrations

from juloserver.julo.statuses import LoanStatusCodes
from juloserver.streamlined_communication.constant import CommunicationPlatform
from juloserver.streamlined_communication.models import (
    StreamlinedCommunication,
    StreamlinedCommunicationParameterList)



def update_parameterlist_streamlined_data(apps, schema_editor):
    data = [
        {
            'example': "Bpk/Ibu",
            'description': "Shortened title",
            'parameter_name': "{{short_title}}",
            'platform': ["SMS", "PN"],
        },
        {
            'example': "Bapak",
            'description': "Title - Bapak/Ibu",
            'parameter_name': "{{title}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },
        {
            'example': "Yasuo",
            'description': "Customer Firstname",
            'parameter_name': "{{firstname}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },
        {
            'example': "Yasuo Yanto",
            'description': "Customer Fullname",
            'parameter_name': "{{fullname}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },
        {
            'example': "1.500.000",
            'description': "remaining haven't paid loan",
            'parameter_name': "{{due_amount}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },
        {
            'example': "26-Feb-2021",
            'description': "due_date of payment",
            'parameter_name': "{{due_date}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },
        {
            'example': "26/2",
            'description': "Short ptp_date",
            'parameter_name': "{{short_ptp_date}}",
            'platform': ["SMS", "PN"]
        },
        {
            'example': "28-Feb-2021",
            'description': "Full ptp_date",
            'parameter_name': "{{ptp_date}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },
        {
            'example': "1.000.000",
            'description': "Ptp Amount",
            'parameter_name': "{{ptp_amount}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },
        {
            'example': "Bank MAYBANK",
            'description': "Payment method name",
            'parameter_name': "{{primary_va_name}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },

        {
            'example': "7821822071159104",
            'description': "virtual account number for payment",
            'parameter_name': "{{primary_va_number}}",
            'platform': ["SMS", "PN", "EMAIL"]
        },

    ]

    for param_data in data:
        for item in range(len(param_data['platform'])):
            platform = param_data['platform'][item]
            # Delete old one
            StreamlinedCommunicationParameterList.objects.filter(
                parameter_name=param_data['parameter_name'],
                platform=platform
            ).delete()

            StreamlinedCommunicationParameterList.objects.create(
                description=param_data['description'],
                parameter_name=param_data['parameter_name'],
                platform=platform,
                example=param_data['example'],
                is_ptp=True
            )



class Migration(migrations.Migration):
    dependencies = [
    ]

    operations = [
        migrations.RunPython(update_parameterlist_streamlined_data,
                             migrations.RunPython.noop)
    ]
