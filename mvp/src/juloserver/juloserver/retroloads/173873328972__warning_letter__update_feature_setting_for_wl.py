# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2025-02-05 05:28
from __future__ import unicode_literals

from django.db import migrations
from juloserver.julo.models import FeatureSetting
from juloserver.julo.constants import FeatureNameConst
from juloserver.minisquad.constants import FeatureNameConst as MiniSquadFeatureSettingConst

def execute(apps, schema_editor):
    feature_setting = FeatureSetting.objects.filter(
        feature_name=FeatureNameConst.EXTERNAL_WARNING_LETTER).last()
    if feature_setting:
        exists_parameter = feature_setting.parameters
        if exists_parameter:
            exists_parameter['KALD']['wl_version'] = 4
            feature_setting.update_safely(parameters=exists_parameter)

    feature_setting1 = FeatureSetting.objects.filter(
        feature_name=MiniSquadFeatureSettingConst.WARNING_LETTER_CONFIG).last()
    if feature_setting1:
        exists_parameter1 = feature_setting1.parameters
        if exists_parameter1:
            exists_parameter1['latest_version'] = 4
            feature_setting1.update_safely(parameters=exists_parameter1)

class Migration(migrations.Migration):

    dependencies = []

    operations = [migrations.RunPython(execute, migrations.RunPython.noop)]
