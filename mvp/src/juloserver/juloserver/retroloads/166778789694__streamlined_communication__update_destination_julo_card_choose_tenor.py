# -*- coding: utf-8 -*-
# Generated by Django 1.9.5 on 2022-11-07 02:24
from __future__ import unicode_literals

from django.db import migrations

from juloserver.streamlined_communication.models import StreamlinedCommunication
from juloserver.streamlined_communication.constant import CardProperty


def update_destination_julo_card_choose_tenor(apps, schema_editor):
    streamlined_com = StreamlinedCommunication.objects.get_or_none(
        extra_conditions=CardProperty.CREDIT_CARD_TRANSACTION_CHOOSE_TENOR
    )
    if not streamlined_com:
        return
    button_property = streamlined_com.message.info_card_property.infocardbuttonproperty_set.filter(
        button_name='R.BUTTON'
    ).last()
    if not button_property:
        return
    button_property.update_safely(
        destination='julo_card_choose_tenor'
    )


class Migration(migrations.Migration):

    dependencies = [
    ]

    operations = [
        migrations.RunPython(update_destination_julo_card_choose_tenor, migrations.RunPython.noop),
    ]
